<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Создание пользовательских записей в wordpress | Заметки на полях</title>
    <meta name="description" content="Как создать произвольные типы записей в wordpress">
    <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#46bd87">
    
    <link rel="preload" href="/assets/css/0.styles.4993531b.css" as="style"><link rel="preload" href="/assets/js/app.6e4996bc.js" as="script"><link rel="preload" href="/assets/js/4.11d3a3db.js" as="script"><link rel="preload" href="/assets/js/17.b44ee3ae.js" as="script"><link rel="preload" href="/assets/js/28.785693ad.js" as="script"><link rel="prefetch" href="/assets/js/10.23d584b0.js"><link rel="prefetch" href="/assets/js/11.7e9fc27e.js"><link rel="prefetch" href="/assets/js/12.778cebda.js"><link rel="prefetch" href="/assets/js/13.f9a0865b.js"><link rel="prefetch" href="/assets/js/14.7e9142f5.js"><link rel="prefetch" href="/assets/js/15.81a256d2.js"><link rel="prefetch" href="/assets/js/16.49af5ffe.js"><link rel="prefetch" href="/assets/js/18.5aee35b6.js"><link rel="prefetch" href="/assets/js/19.0db9aae5.js"><link rel="prefetch" href="/assets/js/2.35b2c6bb.js"><link rel="prefetch" href="/assets/js/20.dd2ea1cb.js"><link rel="prefetch" href="/assets/js/21.393c5d86.js"><link rel="prefetch" href="/assets/js/22.56cf0890.js"><link rel="prefetch" href="/assets/js/23.155f85b8.js"><link rel="prefetch" href="/assets/js/24.b74b7cb5.js"><link rel="prefetch" href="/assets/js/25.eae2d23b.js"><link rel="prefetch" href="/assets/js/26.036b3a68.js"><link rel="prefetch" href="/assets/js/27.375f2bdb.js"><link rel="prefetch" href="/assets/js/29.11833701.js"><link rel="prefetch" href="/assets/js/3.a76664f0.js"><link rel="prefetch" href="/assets/js/30.6ecf91ca.js"><link rel="prefetch" href="/assets/js/31.5227900f.js"><link rel="prefetch" href="/assets/js/32.c60ace8f.js"><link rel="prefetch" href="/assets/js/33.b41a62d6.js"><link rel="prefetch" href="/assets/js/34.de1eca42.js"><link rel="prefetch" href="/assets/js/35.6640f8d9.js"><link rel="prefetch" href="/assets/js/36.5ae9284d.js"><link rel="prefetch" href="/assets/js/37.3bd95024.js"><link rel="prefetch" href="/assets/js/38.b492b55b.js"><link rel="prefetch" href="/assets/js/39.217589d9.js"><link rel="prefetch" href="/assets/js/40.f390632a.js"><link rel="prefetch" href="/assets/js/41.2a87ce19.js"><link rel="prefetch" href="/assets/js/42.0078f9a2.js"><link rel="prefetch" href="/assets/js/43.305a1d21.js"><link rel="prefetch" href="/assets/js/44.d68d09d3.js"><link rel="prefetch" href="/assets/js/45.725969ad.js"><link rel="prefetch" href="/assets/js/46.5006191f.js"><link rel="prefetch" href="/assets/js/47.02f0ac47.js"><link rel="prefetch" href="/assets/js/48.a1479944.js"><link rel="prefetch" href="/assets/js/49.f202290e.js"><link rel="prefetch" href="/assets/js/5.260a7e1b.js"><link rel="prefetch" href="/assets/js/50.d4cc05c9.js"><link rel="prefetch" href="/assets/js/51.351e60fc.js"><link rel="prefetch" href="/assets/js/52.2d05f9b0.js"><link rel="prefetch" href="/assets/js/53.bff13ad2.js"><link rel="prefetch" href="/assets/js/54.25ee54c4.js"><link rel="prefetch" href="/assets/js/55.9fe9e953.js"><link rel="prefetch" href="/assets/js/56.96ba4927.js"><link rel="prefetch" href="/assets/js/57.4e35a560.js"><link rel="prefetch" href="/assets/js/58.ae2210a1.js"><link rel="prefetch" href="/assets/js/59.8a325a55.js"><link rel="prefetch" href="/assets/js/6.58fecefc.js"><link rel="prefetch" href="/assets/js/60.16b2173a.js"><link rel="prefetch" href="/assets/js/61.9d2a0001.js"><link rel="prefetch" href="/assets/js/62.f563cd8e.js"><link rel="prefetch" href="/assets/js/63.1a72cc0f.js"><link rel="prefetch" href="/assets/js/64.e88ea223.js"><link rel="prefetch" href="/assets/js/65.13f19506.js"><link rel="prefetch" href="/assets/js/66.8c2e411f.js"><link rel="prefetch" href="/assets/js/67.f44e0d12.js"><link rel="prefetch" href="/assets/js/68.ea7ddfd9.js"><link rel="prefetch" href="/assets/js/69.b35d4c71.js"><link rel="prefetch" href="/assets/js/7.28b8ec71.js"><link rel="prefetch" href="/assets/js/70.11072557.js"><link rel="prefetch" href="/assets/js/71.17ae261d.js"><link rel="prefetch" href="/assets/js/8.42c742f4.js"><link rel="prefetch" href="/assets/js/9.3db5d928.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4993531b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="common common--light"><header class="header" data-v-32223a35><a href="/" aria-label="menu" class="hamburger" data-v-7ac966a8><div class="line-h" data-v-7ac966a8></div> <div class="text-wrap" data-v-7ac966a8></div> <svg width="42px" height="42px" viewBox="0 0 42 42" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-7ac966a8><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-7ac966a8><path id="square" stroke="#000000" width="41" height="41" d="M0.5 0.5 L41.5 0.5 L41.5 41.5 L0.5 41.5 Z" class="bz" data-v-7ac966a8></path></g></svg> <div class="line-h" data-v-7ac966a8></div></a></header> <main class="page content"><article><h1>Пользовательские типы записей в wordpress</h1> <div class="content__default"><p>Начиная с третьей версии wordpress предоставляет в наше распоряжение
такой любопытный инструмент как произвольные типы записей (они же пользовательские,
они же таксономии). Да, автор в курсе, что об этом написано уже немало строк
в том числе и на русском языке, однако, столкнувшись с таксономиями в реальности,
не всегда можно найти подробные примеры их использования (конечно, не считая скудного описания
на официальном сайте wordpress). А посему... ну, как обычно, пишу, чтобы
не забыть, ибо старые проекты, содержащие весь код, сохраняю редко.</p> <p></p><div class="table-of-contents"><ul><li><a href="#как-создать">Как создать?</a></li><li><a href="#как-добавить-допоnнитеnьную-информацию">Как добавить дополнительную информацию?</a></li><li><a href="#как-вывести-на-странице">Как вывести на странице?</a></li></ul></div><p></p> <h2 id="как-создать"><a href="#как-создать" aria-hidden="true" class="header-anchor">#</a> Как создать?</h2> <p>Вообще, (вы удивитесь) wordpress уже содержит несколько примеров типов записей.
Таковыми являются:</p> <ul><li>пост (post -&gt; single.php)</li> <li>страница (page -&gt; page.php)</li> <li>вложения они же медиафайлы (attachments)</li> <li>редакции (revisions)</li> <li>элементы меню (nav_menu_item)</li></ul> <p>Когда вы создаёте свой тип записи, он, как правило, базируется на каком-то уже существующем
и наследует поведение встроенного типа. В примере создадим новый тип записи «Новости»,
взяв за основу обычный пост.</p> <p><img src="/assets/img/wp-news.png" alt="&quot;Wordpress News Example&quot;"></p> <p>Подобные вещи пригодятся на сайтах, где нужна более разнообразная структура,
чем предлагается по-умолчанию.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/* includes/post-types.php */</span>
<span class="token comment">/*
** Custom types
** Icons for Type:
** https://developer.wordpress.org/resource/dashicons/
 */</span>

<span class="token comment">// News</span>
<span class="token keyword">function</span> <span class="token function">create_news</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">register_post_type</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'news'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
      <span class="token single-quoted-string string">'labels'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token single-quoted-string string">'name'</span>            <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'News'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'singular_name'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'News'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'add_new'</span>         <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Add news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'add_new_item'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Add news item'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'edit'</span>            <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Edit news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'edit_item'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Edit news item'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'new_item'</span>        <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Single news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'all_items'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'All news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'view'</span>            <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'View news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'view_item'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'View single news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'search_items'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Search news'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'not_found'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'News not found'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'public'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">,</span> <span class="token comment">// show in admin panel?</span>
    <span class="token single-quoted-string string">'menu_position'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'supports'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'title'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'editor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'thumbnail'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'excerpt'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'custom-fields'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'taxonomies'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">''</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'has_archive'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'capability_type'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'post'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'menu_icon'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'dashicons-admin-site'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'rewrite'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'slug'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'news'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'init'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'create_news'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>Что сделали? Зарегистрировали новый тип записи с именем news. В массиве он принимает
возможные значения, определяющие то, как будут выводиться названия тех
или иных действий при редактировании новостей в административной панели. При этом
использовали названия, учитывающие локализацию. Если вы делаете шаблон, не предназначенный
для «мультиязычной» аудитории, можно ограничиться наименованиями на русском.</p> <p>Кроме этого, в админке пункт новостей находится на пятом месте. А сам тип записи
поддерживает такие плюшки как заголовок, редактор, возможность прикреплять изображение
и выводить краткое описание новости.</p> <p>Пункт taxonomies предназначен для связывания типа записи с произвольной же таксономией.
Но это не является темой данной заметки и будет обсуждаться в будующих пцбликациях.</p> <p><img src="/assets/img/wp-post-type.png" alt="&quot;Wordpress Custom Post Type&quot;"></p> <p>Следуем дальше: статьи наших новостей имеют архив и собственную иконку, которая
будет отображаться для администратора. В самом начале листинга указана страница,
где можно посмотреть имеющиеся иконки для wordpress и использовать их, дабы
отделить мух от котлет (обычную запись от новости): так удобнее.</p> <p>Ну, и наконец пути к нашим новостям будут иметь адрес вида <code>mydomain.com/news/my-first-news</code>.
Отлично. Инициализируем новый тип записи при помощи <code>add_action</code> и топаем в админку:
обновлять роутинг (сохранить изменения), иначе wordpress не сможет найти страницы с <code>news</code>.</p> <p><img src="/assets/img/wp-routing.png" alt="&quot;Wordpress Routing&quot;"></p> <p>Кстати, google требует, чтобы новости оканчивались
не красивым названием, а ID. Поэтому иногда нужно знать как переопределить
стандартные пути к ним. Сделать это можно в <code>functions.php</code> вот таким хитрым образом:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/* functions.php */</span>
<span class="token comment">/* Change links for news post type */</span>
<span class="token keyword">function</span> <span class="token function">news_permalink</span><span class="token punctuation">(</span><span class="token variable">$permalink</span><span class="token punctuation">,</span> <span class="token variable">$post</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">post_type</span> <span class="token operator">==</span> <span class="token single-quoted-string string">'news'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$permalink</span> <span class="token punctuation">.</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">ID</span> <span class="token punctuation">.</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$permalink</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post_type_link'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'news_permalink'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">news_rewrite_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">add_rewrite_rule</span><span class="token punctuation">(</span>
        <span class="token single-quoted-string string">'news/.+?/([0-9]+)?$'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'index.php?post_type=news&amp;p=$matches[1]'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'top'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'init'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'news_rewrite_init'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="как-добавить-допоnнитеnьную-информацию"><a href="#как-добавить-допоnнитеnьную-информацию" aria-hidden="true" class="header-anchor">#</a> Как добавить дополнительную информацию?</h2> <p>Иногда помимо добавления самого типа записи требуется расширить его
представление в административной панели. К примеру, надо вывести информацию
об оригинальном источнике новости. В таком случае придётся обратиться к неким
мистическим сущностям wordpress, название которых слабо переводится на русский,
(и потому нет желания его коверкать, придумывая неологизмы) это metaboxes.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/* includes/metaboxes.php */</span>
<span class="token keyword">function</span> <span class="token function">links_custom_meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">add_meta_box</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'links_meta'</span><span class="token punctuation">,</span>
                  <span class="token function">__</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Source'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token single-quoted-string string">'links_meta_callback'</span><span class="token punctuation">,</span>
                  <span class="token single-quoted-string string">'news'</span><span class="token punctuation">,</span>
                  <span class="token single-quoted-string string">'advanced'</span><span class="token punctuation">,</span>
                  <span class="token single-quoted-string string">'default'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'add_meta_boxes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links_custom_meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>Что всё это значит:</p> <ul><li>links_meta      -&gt; идентификатор</li> <li>Source          -&gt; название блока</li> <li>links_meta_callback -&gt; обратный вызов</li> <li>news            -&gt; к какому типу записи применить</li> <li>advanced/normal -&gt; в каком месте вывести</li> <li>default/height  -&gt; приоритет в контексте других блоков</li></ul> <p>Какие поля будет включать блок? Обратимся к функции обратного вызова.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">links_meta_callback</span><span class="token punctuation">(</span> <span class="token variable">$post</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token function">_e</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'&lt;p&gt;Original news link:&lt;/p&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">wp_nonce_field</span><span class="token punctuation">(</span> <span class="token function">basename</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links_nonce'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$links_stored_meta</span> <span class="token operator">=</span> <span class="token function">get_post_meta</span><span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">ID</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token delimiter important">?&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>links-news-original<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>links-row-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">_e</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'&lt;i&gt;Site:&lt;/i&gt;&lt;br&gt;'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links-textdomain'</span> <span class="token punctuation">)</span><span class="token delimiter important">?&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>links-news-original<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>links-news-original<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">isset</span> <span class="token punctuation">(</span> <span class="token variable">$links_stored_meta</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'links-news-original'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">echo</span> <span class="token variable">$links_stored_meta</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'links-news-original'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Проиллюстрируем сказанное:</p> <p><img src="data:image/png;base64,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" alt="&quot;Wordpress Metaboxes&quot;"></p> <p>Наконец, научим metabox запоминать ту информацию, которая была записана в поле.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/**
 * Saves the custom meta input
 */</span>
<span class="token keyword">function</span> <span class="token function">links_meta_save</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Checks save status</span>
    <span class="token variable">$is_autosave</span> <span class="token operator">=</span> <span class="token function">wp_is_post_autosave</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$is_revision</span> <span class="token operator">=</span> <span class="token function">wp_is_post_revision</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$is_valid_nonce</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token single-quoted-string string">'links_nonce'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wp_verify_nonce</span><span class="token punctuation">(</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token single-quoted-string string">'links_nonce'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">basename</span><span class="token punctuation">(</span> <span class="token constant">__FILE__</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token single-quoted-string string">'true'</span> <span class="token punctuation">:</span> <span class="token single-quoted-string string">'false'</span><span class="token punctuation">;</span>

    <span class="token comment">// Exits script depending on save status</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$is_autosave</span> <span class="token operator">||</span> <span class="token variable">$is_revision</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token variable">$is_valid_nonce</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Checks for input and sanitizes/saves if needed</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token single-quoted-string string">'links-news-original'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">update_post_meta</span><span class="token punctuation">(</span> <span class="token variable">$post_id</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links-news-original'</span><span class="token punctuation">,</span> <span class="token function">sanitize_text_field</span><span class="token punctuation">(</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span> <span class="token single-quoted-string string">'links-news-original'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'save_post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links_meta_save'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="как-вывести-на-странице"><a href="#как-вывести-на-странице" aria-hidden="true" class="header-anchor">#</a> Как вывести на странице?</h2> <p>Есть два варианта: сделать шаблон по правилам wordpress или же вывести на
странице с шаблоном собственным.</p> <p>Для шаблона, который будет выводить каждую отдельную запись, создадим страницу
с именем <code>single-news.php</code> и примерно таким содержанием:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">get_header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// Retrieves the stored value from the database</span>
<span class="token variable">$meta_url</span> <span class="token operator">=</span> <span class="token function">get_post_meta</span><span class="token punctuation">(</span> <span class="token function">get_the_ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'links-news-original'</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">&gt;</span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">the_content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>copyright-news<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span> <span class="token variable">$meta_url</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">echo</span> <span class="token single-quoted-string string">'По материалам: &lt;a href=&quot;'</span><span class="token punctuation">.</span><span class="token variable">$meta_url</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'&quot; target=&quot;_blank&quot;&gt;'</span><span class="token punctuation">.</span><span class="token variable">$meta_url</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'&lt;/a&gt;'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token delimiter important">?&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">get_footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p>Может так случиться, что для особого типа записи надо будет выводить свой шаблон.
Зачем? А там другое оформление или даже разметка. Тогда записываем ещё
одну вещь: проверим тип записи, и если он совпадает с нужным, пусть движок
использует страницу, отличную от стандартной. Сделаем это для страницы архива,
которая не воспринимает указание шаблона а-ля <code>archive-news</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// Custom News Archive</span>
<span class="token keyword">function</span> <span class="token function">template_news</span><span class="token punctuation">(</span><span class="token variable">$template</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">global</span> <span class="token variable">$wp_query</span><span class="token punctuation">;</span>
  <span class="token variable">$post_type</span> <span class="token operator">=</span> <span class="token function">get_query_var</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post_type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$wp_query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">is_search</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$post_type</span> <span class="token operator">==</span> <span class="token single-quoted-string string">'news'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">locate_template</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'archive-news'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token variable">$template</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add_filter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'template_include'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'template_news'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>Записи в таком шаблоне выводятся как обычно, без дополнительных запросов с wp_query.</p></div> <div class="tags" data-v-1c67afbc><span data-v-1c67afbc>2015</span> 

  <a href="/?tag=other" data-v-1c67afbc>
    other
  </a></div> <div class="prev-next" data-v-326f747b><div class="prev-next__prev" data-v-326f747b><a href="/posts/responsive-menu/" data-v-326f747b>
      Меню на чистом css
    </a></div> <div class="prev-next__between" data-v-326f747b>⤧</div> <div class="prev-next__next" data-v-326f747b><a href="/posts/object-fit/" data-v-326f747b>
      Работа с изображениями: взгляд в будущее
    </a></div></div> <!----></article></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6e4996bc.js" defer></script><script src="/assets/js/4.11d3a3db.js" defer></script><script src="/assets/js/17.b44ee3ae.js" defer></script><script src="/assets/js/28.785693ad.js" defer></script>
  </body>
</html>
