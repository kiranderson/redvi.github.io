<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web-приложение на django | Заметки на полях</title>
    <meta name="description" content="Пример первоначальной настройки и наполнения сайта на Django">
    <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#46bd87">
    
    <link rel="preload" href="/assets/css/0.styles.4993531b.css" as="style"><link rel="preload" href="/assets/js/app.6e4996bc.js" as="script"><link rel="preload" href="/assets/js/4.11d3a3db.js" as="script"><link rel="preload" href="/assets/js/29.11833701.js" as="script"><link rel="preload" href="/assets/js/28.785693ad.js" as="script"><link rel="prefetch" href="/assets/js/10.23d584b0.js"><link rel="prefetch" href="/assets/js/11.7e9fc27e.js"><link rel="prefetch" href="/assets/js/12.778cebda.js"><link rel="prefetch" href="/assets/js/13.f9a0865b.js"><link rel="prefetch" href="/assets/js/14.7e9142f5.js"><link rel="prefetch" href="/assets/js/15.81a256d2.js"><link rel="prefetch" href="/assets/js/16.49af5ffe.js"><link rel="prefetch" href="/assets/js/17.b44ee3ae.js"><link rel="prefetch" href="/assets/js/18.5aee35b6.js"><link rel="prefetch" href="/assets/js/19.0db9aae5.js"><link rel="prefetch" href="/assets/js/2.35b2c6bb.js"><link rel="prefetch" href="/assets/js/20.dd2ea1cb.js"><link rel="prefetch" href="/assets/js/21.393c5d86.js"><link rel="prefetch" href="/assets/js/22.56cf0890.js"><link rel="prefetch" href="/assets/js/23.155f85b8.js"><link rel="prefetch" href="/assets/js/24.b74b7cb5.js"><link rel="prefetch" href="/assets/js/25.eae2d23b.js"><link rel="prefetch" href="/assets/js/26.036b3a68.js"><link rel="prefetch" href="/assets/js/27.375f2bdb.js"><link rel="prefetch" href="/assets/js/3.a76664f0.js"><link rel="prefetch" href="/assets/js/30.6ecf91ca.js"><link rel="prefetch" href="/assets/js/31.5227900f.js"><link rel="prefetch" href="/assets/js/32.c60ace8f.js"><link rel="prefetch" href="/assets/js/33.b41a62d6.js"><link rel="prefetch" href="/assets/js/34.de1eca42.js"><link rel="prefetch" href="/assets/js/35.6640f8d9.js"><link rel="prefetch" href="/assets/js/36.5ae9284d.js"><link rel="prefetch" href="/assets/js/37.3bd95024.js"><link rel="prefetch" href="/assets/js/38.b492b55b.js"><link rel="prefetch" href="/assets/js/39.217589d9.js"><link rel="prefetch" href="/assets/js/40.f390632a.js"><link rel="prefetch" href="/assets/js/41.2a87ce19.js"><link rel="prefetch" href="/assets/js/42.0078f9a2.js"><link rel="prefetch" href="/assets/js/43.305a1d21.js"><link rel="prefetch" href="/assets/js/44.d68d09d3.js"><link rel="prefetch" href="/assets/js/45.725969ad.js"><link rel="prefetch" href="/assets/js/46.5006191f.js"><link rel="prefetch" href="/assets/js/47.02f0ac47.js"><link rel="prefetch" href="/assets/js/48.a1479944.js"><link rel="prefetch" href="/assets/js/49.f202290e.js"><link rel="prefetch" href="/assets/js/5.260a7e1b.js"><link rel="prefetch" href="/assets/js/50.d4cc05c9.js"><link rel="prefetch" href="/assets/js/51.351e60fc.js"><link rel="prefetch" href="/assets/js/52.2d05f9b0.js"><link rel="prefetch" href="/assets/js/53.bff13ad2.js"><link rel="prefetch" href="/assets/js/54.25ee54c4.js"><link rel="prefetch" href="/assets/js/55.9fe9e953.js"><link rel="prefetch" href="/assets/js/56.96ba4927.js"><link rel="prefetch" href="/assets/js/57.4e35a560.js"><link rel="prefetch" href="/assets/js/58.ae2210a1.js"><link rel="prefetch" href="/assets/js/59.8a325a55.js"><link rel="prefetch" href="/assets/js/6.58fecefc.js"><link rel="prefetch" href="/assets/js/60.16b2173a.js"><link rel="prefetch" href="/assets/js/61.9d2a0001.js"><link rel="prefetch" href="/assets/js/62.f563cd8e.js"><link rel="prefetch" href="/assets/js/63.1a72cc0f.js"><link rel="prefetch" href="/assets/js/64.e88ea223.js"><link rel="prefetch" href="/assets/js/65.13f19506.js"><link rel="prefetch" href="/assets/js/66.8c2e411f.js"><link rel="prefetch" href="/assets/js/67.f44e0d12.js"><link rel="prefetch" href="/assets/js/68.ea7ddfd9.js"><link rel="prefetch" href="/assets/js/69.b35d4c71.js"><link rel="prefetch" href="/assets/js/7.28b8ec71.js"><link rel="prefetch" href="/assets/js/70.11072557.js"><link rel="prefetch" href="/assets/js/71.17ae261d.js"><link rel="prefetch" href="/assets/js/8.42c742f4.js"><link rel="prefetch" href="/assets/js/9.3db5d928.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4993531b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="common common--light"><header class="header" data-v-32223a35><a href="/" aria-label="menu" class="hamburger" data-v-7ac966a8><div class="line-h" data-v-7ac966a8></div> <div class="text-wrap" data-v-7ac966a8></div> <svg width="42px" height="42px" viewBox="0 0 42 42" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-v-7ac966a8><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-7ac966a8><path id="square" stroke="#000000" width="41" height="41" d="M0.5 0.5 L41.5 0.5 L41.5 41.5 L0.5 41.5 Z" class="bz" data-v-7ac966a8></path></g></svg> <div class="line-h" data-v-7ac966a8></div></a></header> <main class="page content"><article><h1>Django: первые страницы</h1> <div class="content__default"><p>Не правда ли, было бы любопытно опробовать знаменитый фреймворк
Django для создания сайтов разной степени сложности? Если вам по душе
узнавать что-то новое или вы по каким-либо причинам решили отказаться от
разработки на PHP — Django как раз то, что вам нужно. В сегодняшнем посте
будут оговорены элементарные, но такие необходимые вещи: создание проекта
и приложения, модели и отображения, шаблонов с использованием стандартных
фильтров. Не исключено, что автор продолжит начатую тему и в последующем
будет опубликован ряд постов об этом популярном фреймворке.</p> <p>Далее предполагается, что у читателя установлен <code>Python3</code> и <code>Django &gt;=1.5</code>: именно
на них рассчитаны наши последующие телодвижения. Устанавливать необходимые
для конкретного проекта приложения лучше используя virtualenw и pip.
Так вы сможете избавить себя от чтения руководств по установке и захламления системных файлов.</p> <h2 id="создание-проекта-и-приnожения"><a href="#создание-проекта-и-приnожения" aria-hidden="true" class="header-anchor">#</a> Создание проекта и приложения</h2> <p>Проект — основной каталог, где будут располагаться те или иные приложения,
также проект содержит основные настройки будущего сайта. Создадим корневой
каталог для проекта и сам проект:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> djcode <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> djcode
$ django-admin.py startproject pySite
</code></pre></div><p>Просмортим появившиеся каталоги:</p> <div class="language- extra-class"><pre class="language-text"><code>$ tree pySite
pySite
├── manage.py
└── pySite
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre></div><p>Вкратце:</p> <p><code>manage.py</code> — отвечает за управление проектом, например, командой <code>python manage.py runserver</code> можно запустить сервер для тестовой разработки.</p> <p><code>__init__.py</code> — нужен для того, чтобы python рассматривал каталог <code>pySite</code> как пакет.</p> <p><code>settings.py</code> — файл настроек проекта: настройки языка, часового пояса, соединения с базой данных, подключаемых приложений и прочего.</p> <p><code>urls.py</code> — настройки URL-адресов для сайта</p> <p><code>wsgi.py</code> — конфигурация модуля <code>wsgi</code> для веб-сервера</p> <p>Хорошо, когда проект расширяемый. Ещё лучше, если его легко сопровождать. Оба этих условия выполняются в Django. Чтобы расширить функционал сайта, следует создать для него какое-либо приложение: галерею, форум, блоги. Затем лишь подключить его в <code>settings.py</code> и подправить свой <code>urls.py</code>, дабы при переходе по определённому адресу пользователь перенаправлялся к страницам приложения. Поэтому давайте создадим какое-нибудь приложение. Пусть оно отвечает за публикацию новостей и хранится в том же каталоге, что и основной проект.</p> <div class="language- extra-class"><pre class="language-text"><code>$ django-admin.py startapp news
$ tree pySite
pySite
|-- pySite
|   |-- __init__.py
|   |-- settings.py
|   |-- urls.py
|   |-- views.py
|   `-- wsgi.py
|-- manage.py
|-- news
|   |-- admin.py
|   |-- __init__.py
|   |-- models.py
|   |-- tests.py
|   |-- urls.py
|   `-- views.py
</code></pre></div><p>Вкратце:</p> <p><code>models.py</code> — файл для взаимодействия с базой данных</p> <p><code>urls.py</code> — отдельный файл url'ов. Он может быть пустым, если вы решите использовать для всех адресов <code>urls.py</code> проекта</p> <p><code>admin.py</code> — создаётся вручную, нужен исключительно для удобства: настройка отображения моделей в административной панели</p> <p><code>views.py</code> — самое интересное, управляет логикой приложения</p> <p>С приложением определились. Отлично! Пора браться за настройки.</p> <h2 id="настройки-дnя-сайта"><a href="#настройки-дnя-сайта" aria-hidden="true" class="header-anchor">#</a> Настройки для сайта</h2> <p>Заглянем в файл <code>settings.py</code> и настроим его под свои скромные пока нужды.</p> <p><code>PROJECT_PATH</code> — указание на то, где Django нужно искать корень проекта. Лучше использовать запись, приведённую ниже, чем писать полный путь вроде <code>~/home/user/djcode/pySite</code>.</p> <p><code>DEBUG = True</code> — отладка влючена, Django будет выводить информативные сообщения об ошибках.</p> <p><code>DATABASES</code> — настройки для вашей базы данных. В примере это <code>sqlite3</code>, который не требует особого к себе отношения, но и полноценной базой данных для сайта на production-сервере быть не может. Чтобы использовать <code>sqlite3</code>, достаточно создать в директории проекта файл <code>sqlite.db</code>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> os<span class="token punctuation">.</span>path <span class="token keyword">import</span> abspath<span class="token punctuation">,</span> join<span class="token punctuation">,</span> dirname

PROJECT_PATH <span class="token operator">=</span> abspath<span class="token punctuation">(</span>join<span class="token punctuation">(</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
DEBUG <span class="token operator">=</span> <span class="token boolean">True</span>
DATABASES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.sqlite3'</span><span class="token punctuation">,</span>
        <span class="token string">'NAME'</span><span class="token punctuation">:</span>  join<span class="token punctuation">(</span>PROJECT_PATH<span class="token punctuation">,</span> <span class="token string">'sqlite.db'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Идём дальше. Желательно сразу создать и подключить директорию, где будет храниться статика: css, javascript и изображения.
Кроме того, нам понадобится директория под наши html-файлы.</p> <p><code>STATIC_URL</code> — относительный url для статики</p> <p><code>STATICFILES_DIRS</code> — директория, где расположены соответствующие файлы</p> <p><code>TEMPLATE_LOADERS</code> — модули для работы с шаблонами</p> <p><code>TEMPLATE_DIRS</code> — указание на директорию, где лежат html-шаблоны</p> <p><code>ROOT_URLCONF</code> — главный файл url'ов</p> <p><code>INSTALLED_APPS</code> — подключенные приложения, вниз добавим наш news.</p> <div class="language-python extra-class"><pre class="language-python"><code>STATIC_URL <span class="token operator">=</span> <span class="token string">'/static/'</span>
STATICFILES_DIRS <span class="token operator">=</span> <span class="token punctuation">(</span>join<span class="token punctuation">(</span>PROJECT_PATH<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
TEMPLATE_LOADERS <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token string">'django.template.loaders.filesystem.Loader'</span><span class="token punctuation">,</span>
    <span class="token string">'django.template.loaders.app_directories.Loader'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

ROOT_URLCONF <span class="token operator">=</span> <span class="token string">'pySite.urls'</span>
TEMPLATE_DIRS <span class="token operator">=</span> <span class="token punctuation">(</span>
    join<span class="token punctuation">(</span>PROJECT_PATH<span class="token punctuation">,</span> <span class="token string">'templates'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sites'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>
    <span class="token string">'news'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Теперь можно проверить сайт на работоспособность. Для этого, находясь в директории с <code>manage.py</code> следует ввести команду:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ python manage.py syncdb
$ python manage.py runserver
</code></pre></div><p>Первая команда создаст записи в базе данных и предложит создать суперпользователя, если вы подключили приложение административной панели, вторая — запустит тестовый сервер разработки.</p> <p>По адресу <code>127.0.0.1:8000/</code> должно появиться стандартное окно приветствия Django.</p> <h2 id="создание-модеnи-и-представnения-конфигурация-urls-py"><a href="#создание-модеnи-и-представnения-конфигурация-urls-py" aria-hidden="true" class="header-anchor">#</a> Создание модели и представления, конфигурация <code>urls.py</code></h2> <p>Следующим шагом будет настройка моделей для взаимодействия с БД, создание представления (логика приложения), настройка файла <code>urls.py</code>.</p> <p>В примере ниже создаётся класс <code>Post</code>, подкласс абстрактного класса <code>models.Model</code>. Мы хотим видеть у нашего поста название (<code>title</code>), его тело (<code>body</code>), дату создания (<code>timestamp</code>) и автора (<code>author</code>). Обратите внимание на <code>models.*Field</code>. Каждая модель соответствует указанному полю.</p> <p>Так, <code>models.CharField</code> выведет несколько символов, максимальное их значение 150, этого должно хватить для названия;</p> <p><code>models.TextField</code> позволит вводить неограниченное число символов: полноценный текст;</p> <p><code>models.ForeignKey</code> указывает на то, что у поста может быть один автор.</p> <p>Эти таблицы будут созданы в базе данных при синхронизации.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># ~/djcode/pySite/news/models.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User

<span class="token keyword">class</span> <span class="token class-name">Post</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">)</span>
    body <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    timestamp <span class="token operator">=</span> models<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    author <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>User<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__unicode__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>title
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>body
</code></pre></div><p>Теперь создадим наше первое представление. Оно призвано выводить список постов на одной странице. О том, как сделать постраничный вывод поговорим <a href="/posts/django-pagination/">в следующий раз</a>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/news/views.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> get_object_or_404<span class="token punctuation">,</span> render_to_response
<span class="token keyword">from</span> django<span class="token punctuation">.</span>template <span class="token keyword">import</span> RequestContext
<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Post

<span class="token keyword">def</span> <span class="token function">news</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">''' Show all news '''</span>
    posts <span class="token operator">=</span> Post<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-timestamp'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'news/news.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'posts'</span><span class="token punctuation">:</span>posts<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Это простейшее представление, которое принимает все существующие посты и выводит их на определённой странице. Чуть ниже мы создадим эту страницу. Но сначала наполним сайт каким-нибудь содержимым. Административная панель уже подключена в нашем <code>INSTALLED_APPS</code>, осталось только зайти и проверить как отображаются созданные нами модели. Для отображения их в админке создадим ещё один файл (можно вписать это и в предыдущем файле <code>views</code>, но разделить их иногда удобнее):</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/news/admin.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> Post

<span class="token keyword">class</span> <span class="token class-name">PostAdmin</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span>ModelAdmin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    models <span class="token operator">=</span> Post
    list_display <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'timestamp'</span><span class="token punctuation">)</span>
    list_filter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'timestamp'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>

admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>Post<span class="token punctuation">,</span> PostAdmin<span class="token punctuation">)</span>
</code></pre></div><p>Раскомментируйте в <code>~/djcode/pySite/pySite/urls.py</code> строки:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/pySite/urls.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> patterns<span class="token punctuation">,</span> include<span class="token punctuation">,</span> url
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
admin<span class="token punctuation">.</span>autodiscover<span class="token punctuation">(</span><span class="token punctuation">)</span>


urlpatterns <span class="token operator">=</span> patterns<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^admin/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token punctuation">)</span>
</code></pre></div><p>После того, как вы зайдёте по адресу <code>127.0.0.1:8000/admin/</code> и создадите несколько постов, вы должны увидеть нечто подобное:</p> <p><img src="/assets/img/django1.jpg" alt="админка django"></p> <p>Вернёмся к шаблонам. Вообще, создание страниц мы разделим на два этапа: создание базовой страницы и остальных страниц, которые будут просто наследовать содержимое базового шаблона. Это будет весьма кстати, если только вам не хочется писать каждую страницу с нуля.</p> <p>Так будет выглядеть шаблон базовой страницы:</p> <div class="language-django extra-class"><pre class="language-django"><code><span class="token django language-django"><span class="token comment">{# djcode/pySite/templates/base.html #}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">load</span> <span class="token variable">static</span> <span class="token variable">from</span> <span class="token variable">staticfiles</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- подгружаем статику --&gt;</span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">load</span> <span class="token variable">i18n</span>  <span class="token delimiter punctuation">%}</span></span>

<span class="token doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">meta</span> <span class="token delimiter punctuation">%}</span></span>
    <span class="token comment">&lt;!-- подключаем наш css-файл, если он есть --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">static</span> <span class="token string">&quot;css/base.css&quot;</span> <span class="token delimiter punctuation">%}</span></span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">title</span> <span class="token delimiter punctuation">%}</span></span>My Django Site<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">header</span> <span class="token delimiter punctuation">%}</span></span>
        <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">include</span> <span class="token string">&quot;header.html&quot;</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- подключаем «шапку» сайта --&gt;</span>
    <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">content</span> <span class="token delimiter punctuation">%}</span></span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- место для контента --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">footer</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- подключаем «подвал» сайта --&gt;</span>
        <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">include</span> <span class="token string">&quot;footer.html&quot;</span> <span class="token delimiter punctuation">%}</span></span>
    <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Теперь примемся за шаблон, который выведет все наши посты.</p> <div class="language-django extra-class"><pre class="language-django"><code><span class="token django language-django"><span class="token comment">{# djcode/pySite/templates/news/news.html #}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">extends</span> <span class="token string">'base.html'</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- подключаем базовый шаблон --&gt;</span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">title</span> <span class="token delimiter punctuation">%}</span></span>News<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">content</span> <span class="token delimiter punctuation">%}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">for</span> <span class="token variable">post</span> <span class="token keyword">in</span> <span class="token variable">posts</span> <span class="token delimiter punctuation">%}</span></span> <span class="token comment">&lt;!-- итерация по всем постам --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">url</span> <span class="token string">'news:one_new'</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">id</span> <span class="token delimiter punctuation">%}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>

            <span class="token comment">&lt;!-- дата публикации и автор --&gt;</span>
            <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">timestamp</span> <span class="token delimiter punctuation">}}</span></span>
            <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">author</span> <span class="token delimiter punctuation">}}</span></span>

            <span class="token comment">&lt;!-- обрезаем посты, вывод по 80 слов --&gt;</span>
            <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">body</span><span class="token operator">|</span><span class="token filter function">truncatewords</span><span class="token punctuation">:</span><span class="token number">80</span><span class="token operator">|</span><span class="token filter function">safe</span> <span class="token delimiter punctuation">}}</span></span>

            <span class="token comment">&lt;!-- ссылаемся на полный текст поста --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">url</span> <span class="token string">'news:one_new'</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">id</span> <span class="token delimiter punctuation">%}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Читать полностью<span class="token entity" title="&amp;raquo;">&amp;raquo;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>
</code></pre></div><p>Как уже, должно быть, заметил читатель, мы сразу включили ссылку на пока несуществующее представление: вывод отдельного поста целиком. Что требуется для его создания? Дальнейшие наши шаги сводятся к созданию ещё одной функции: на этот раз она будет выводить отдельную страницу, подготовки для неё своего шаблона и настройке файла <code>urls.py</code>. Приступим.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/news/views.py</span>

<span class="token comment"># после функции news дописать</span>
<span class="token keyword">def</span> <span class="token function">one_new</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> post_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">''' Show single news'''</span>
    post <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Post<span class="token punctuation">,</span> pk<span class="token operator">=</span>post_id<span class="token punctuation">)</span>

    <span class="token builtin">vars</span> <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>
        title<span class="token operator">=</span>post<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
        body<span class="token operator">=</span>post<span class="token punctuation">.</span>body<span class="token punctuation">,</span>
        author<span class="token operator">=</span>post<span class="token punctuation">.</span>author<span class="token punctuation">,</span>
        timestamp<span class="token operator">=</span>post<span class="token punctuation">.</span>timestamp<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'news/one_new.html'</span><span class="token punctuation">,</span> <span class="token builtin">vars</span><span class="token punctuation">,</span> context_instance<span class="token operator">=</span>RequestContext<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Переменной post передаётся объект <code>Post</code> с его ID либо вызывается исключение <code>404</code>: страница не найдена. Определяется то, что должно быть выведено: название, автор, время создания. Возвращается страница <code>one_new.html</code>, которой мы сейчас и займёмся.</p> <div class="language-django extra-class"><pre class="language-django"><code><span class="token django language-django"><span class="token comment">{# djcode/pySite/templates/news/one_new.html #}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">extends</span> <span class="token string">'base.html'</span> <span class="token delimiter punctuation">%}</span></span>

<span class="token comment">&lt;!-- отображать название поста как title страницы--&gt;</span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">title</span> <span class="token delimiter punctuation">%}</span></span><span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">content</span> <span class="token delimiter punctuation">%}</span></span>

Дата: <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">timestamp</span> <span class="token delimiter punctuation">}}</span></span>
Автор: <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">author</span> <span class="token delimiter punctuation">}}</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">body</span><span class="token operator">|</span><span class="token filter function">safe</span><span class="token operator">|</span><span class="token filter function">escape</span><span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">На заметку</p> <p><code>escape</code> экранирует HTML-теги, если вы использовали их при написании статьи в админке</p></div> <p>Теперь напишем функцию и шаблон для главной страницы, с которой будем переходить на последние десять записей.
Представление и шаблон главной страницы:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/pySite/views.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render_to_response
<span class="token keyword">from</span> django<span class="token punctuation">.</span>template <span class="token keyword">import</span> RequestContext
<span class="token keyword">from</span> news<span class="token punctuation">.</span>views <span class="token keyword">import</span> Post

<span class="token comment"># можно переписать как в news/views.py</span>
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">vars</span> <span class="token operator">=</span> <span class="token builtin">dict</span> <span class="token punctuation">(</span>
        posts<span class="token operator">=</span>Post<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'-timestamp'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">return</span> render_to_response<span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">,</span> <span class="token builtin">vars</span><span class="token punctuation">,</span> context_instance<span class="token operator">=</span>RequestContext<span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Шаблон для вывода последних десяти публикаций на главной:</p> <div class="language-django extra-class"><pre class="language-django"><code><span class="token django language-django"><span class="token comment">{# djcode/pySite/templates/index.html #}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">extends</span> <span class="token string">&quot;base.html&quot;</span> <span class="token delimiter punctuation">%}</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">title</span> <span class="token delimiter punctuation">%}</span></span>Index Page<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endblock</span> <span class="token delimiter punctuation">%}</span></span>

<span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">block</span> <span class="token variable">content</span> <span class="token delimiter punctuation">%}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>posts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
            <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">for</span> <span class="token variable">post</span> <span class="token keyword">in</span> <span class="token variable">posts</span> <span class="token delimiter punctuation">%}</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">url</span> <span class="token string">'news:one_new'</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">id</span> <span class="token delimiter punctuation">%}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token django language-django"><span class="token delimiter punctuation">{{</span> <span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">title</span> <span class="token delimiter punctuation">}}</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token django language-django"><span class="token delimiter punctuation">{%</span> <span class="token tag keyword">endfor</span> <span class="token delimiter punctuation">%}</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token django language-django"><span class="token delimiter punctuation">{%</span><span class="token tag keyword">endblock</span><span class="token delimiter punctuation">%}</span></span>
</code></pre></div><p>Наконец, создадим два (в примере мы ведь отделяем все приложения
друг от друга, чтобы их можно было подключать к другому проекту
внесением одной лишь строки в <code>INSTALLED_APPS</code> и синхронизацией с БД)
файла <code>urls.py</code>: один главный, другой  — персонально для созданного приложения news.
При наличии пяти-десяти приложений это может быть удобным. Если приложение одно
и со временем расширять функционал не требуется, создайте лишь один <code>urls.py</code>.</p> <p>Импортируем необходимые модули, при входе на главную выводим представление,
указанное в <code>pySite.views.home</code> функции, при входе на <code>http://127.0.0.1:8000/news</code>
перенаправляем поиск в <code>news/urls.py</code>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/pySite/urls.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> patterns<span class="token punctuation">,</span> include<span class="token punctuation">,</span> url
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
admin<span class="token punctuation">.</span>autodiscover<span class="token punctuation">(</span><span class="token punctuation">)</span>

urlpatterns <span class="token operator">=</span> patterns<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^$'</span><span class="token punctuation">,</span> <span class="token string">'pySite.views.home'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^news/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'news.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'news'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^admin/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token punctuation">)</span>
</code></pre></div><p>В следующем файле обрабатываем наши представления:</p> <p>если пользователь заходит на страницу вывода всех новостей, использовать
функцию <code>news.views.news</code>; если на конкретную новость — вывод выбранной
новости из <code>news.views.one_new</code>:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># djcode/pySite/news/urls.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> patterns<span class="token punctuation">,</span> include<span class="token punctuation">,</span> url

urlpatterns <span class="token operator">=</span> patterns<span class="token punctuation">(</span><span class="token string">'news.views'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^$'</span><span class="token punctuation">,</span> <span class="token string">'news'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'news'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^(?P&lt;post_id&gt;\d+)/$'</span><span class="token punctuation">,</span> <span class="token string">'one_new'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'one_new'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token punctuation">)</span>
</code></pre></div><p>Дело сделано. Если всё прошло гладко, мы должны прийти примерно к подобному результату:</p> <p><img src="/assets/img/django2.png" alt="django"></p> <p>Успехов в изучении этого отличного фреймворка!</p></div> <div class="tags" data-v-1c67afbc><span data-v-1c67afbc>2013</span> 

  <a href="/?tag=python" data-v-1c67afbc>
    python
  </a></div> <div class="prev-next" data-v-326f747b><div class="prev-next__prev" data-v-326f747b><a href="/posts/django-pagination/" data-v-326f747b>
      Django: постраничный вывод статей
    </a></div> <div class="prev-next__between" data-v-326f747b>⤧</div> <div class="prev-next__next" data-v-326f747b><a href="/posts/title-latex/" data-v-326f747b>
      Несколько интересных способов оформления глав в LaTeX
    </a></div></div> <!----></article></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6e4996bc.js" defer></script><script src="/assets/js/4.11d3a3db.js" defer></script><script src="/assets/js/29.11833701.js" defer></script><script src="/assets/js/28.785693ad.js" defer></script>
  </body>
</html>
