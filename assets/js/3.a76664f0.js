(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{158:function(e,a,t){e.exports=t.p+"assets/img/general.jpg"},159:function(e,a,t){e.exports=t.p+"assets/img/module-support.jpg"},160:function(e,a,t){e.exports=t.p+"assets/img/block.png"},161:function(e,a,t){e.exports=t.p+"assets/img/processor.jpg"},162:function(e,a,t){e.exports=t.p+"assets/img/power.jpg"},163:function(e,a,t){e.exports=t.p+"assets/img/bus.jpg"},164:function(e,a,t){e.exports=t.p+"assets/img/emulations.jpg"},165:function(e,a,t){e.exports=t.p+"assets/img/network.png"},166:function(e,a,t){e.exports=t.p+"assets/img/device.jpg"},167:function(e,a,t){e.exports=t.p+"assets/img/firmware.jpg"},168:function(e,a,t){e.exports=t.p+"assets/img/file_systems.jpg"},169:function(e,a,t){e.exports=t.p+"assets/img/kernel_hacking.jpg"},170:function(e,a,t){e.exports=t.p+"assets/img/security.jpg"},171:function(e,a,t){e.exports=t.p+"assets/img/crypto.jpg"},172:function(e,a,t){e.exports=t.p+"assets/img/virtualization.jpg"},173:function(e,a,t){e.exports=t.p+"assets/img/library.jpg"},182:function(e,a,t){"use strict";t.r(a);var s=t(3),r=Object(s.a)({},function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("Достаточно давно была написана отличная статья, послужившая верой и правдой\nмногим линуксоидам, кто самостоятельно собирал  своё ядро. Называлась\nона «Ядерная физика для домохозяек, версия 2». Ранее, когда\nдеревья были выше, небо голубее, а настольные компьютеры не столь производительны,\nсборка ядра под своё железо могла внести весомый вклад в увеличение производительности\nжелезного друга. Теперь это уже не столь важно и в большинстве случаев даже не нужно,\nибо прирост будет незначительным. Да и среднестатистический линуксоид как-то\nобмельчал, «скуксился» что ли.")]),e._v(" "),s("p",[e._v("Тем не менее, автору захотелось немного обновить информацию о сборке ядра,\nза которым уже давно закреплена циферка три.")]),e._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#вступnение-иnи-подготовка-к-сборке-ядра"}},[e._v("Вступление или подготовка к сборке ядра")])]),s("li",[s("a",{attrs:{href:"#general-setup"}},[e._v("General setup")])]),s("li",[s("a",{attrs:{href:"#enable-loadable-module-support"}},[e._v("Enable loadable module support")])]),s("li",[s("a",{attrs:{href:"#enable-the-block-layer"}},[e._v("Enable the block layer")])]),s("li",[s("a",{attrs:{href:"#processor-type-and-features"}},[e._v("Processor type and features")])]),s("li",[s("a",{attrs:{href:"#power-management-and-acpi-options"}},[e._v("Power management and ACPI options")])]),s("li",[s("a",{attrs:{href:"#bus-options-pci-etc"}},[e._v("Bus options (PCI etc.)")])]),s("li",[s("a",{attrs:{href:"#executable-file-formats-emulations"}},[e._v("Executable file formats / Emulations")])]),s("li",[s("a",{attrs:{href:"#networking-support"}},[e._v("Networking support")])]),s("li",[s("a",{attrs:{href:"#device-drivers"}},[e._v("Device Drivers")])]),s("li",[s("a",{attrs:{href:"#firmware-drivers"}},[e._v("Firmware Drivers")])]),s("li",[s("a",{attrs:{href:"#file-systems"}},[e._v("File systems")])]),s("li",[s("a",{attrs:{href:"#kernel-hacking"}},[e._v("Kernel hacking")])]),s("li",[s("a",{attrs:{href:"#security-options"}},[e._v("Security options")])]),s("li",[s("a",{attrs:{href:"#cryptographic-api"}},[e._v("Cryptographic API")])]),s("li",[s("a",{attrs:{href:"#virtualization"}},[e._v("Virtualization")])]),s("li",[s("a",{attrs:{href:"#library-routines"}},[e._v("Library routines")])]),s("li",[s("a",{attrs:{href:"#посnесnовие"}},[e._v("Послесловие")])])])]),s("p"),e._v(" "),s("h2",{attrs:{id:"вступnение-иnи-подготовка-к-сборке-ядра"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#вступnение-иnи-подготовка-к-сборке-ядра","aria-hidden":"true"}},[e._v("#")]),e._v(" Вступление или подготовка к сборке ядра")]),e._v(" "),s("p",[e._v("Для сборки можно использовать ядро с "),s("a",{attrs:{href:"http://kernel.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("kernel.org"),s("OutboundLink")],1),e._v(".\nЕсли вам удобнее собрать ядро, поставляемое с вашим дистрибутивом, вы можете\nсмело пропустить этот шаг.")]),e._v(" "),s("p",[e._v("Пройдите по указанной выше ссылке и скачайте ядро "),s("code",[e._v("Latest Stable Kernel")]),e._v(".\nДолжен скачаться файл примерно с таким наименованием: "),s("code",[e._v("linux-3.6.11.tar.bz2")]),e._v(".")]),e._v(" "),s("p",[e._v("Помимо этого, иногда вам может понадобиться поставить заплатки для ядра. Если\nвы не знаете, что это, значит оно вам и не нужно. Хотя мы рассмотрим процесс\nналожения заплаток для полноты картины. Получить их можно всё на том же сайте.")]),e._v(" "),s("p",[e._v("Рекомендация по собственно сборке ядра одна на все дистрибутивы, что естественно.\nА вот инструмент для сборки вполне возможно, что придётся доустановить.\nДля gentoo это пакет "),s("code",[e._v("gentoo-sources")]),e._v(" (если предполагается сборка дистрибутивного\nядра). Для дебиана понадобится установить\n"),s("a",{attrs:{href:"https://wiki.debian.org/BuildADebianKernelPackage",target:"_blank",rel:"noopener noreferrer"}},[e._v("целую пачку пакетов"),s("OutboundLink")],1),e._v(",\nдля арча  понадобится "),s("a",{attrs:{href:"https://wiki.archlinux.org/index.php/Kernels/Traditional_compilation",target:"_blank",rel:"noopener noreferrer"}},[e._v("эта инструкция"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("Перед сборкой неплохо сесть и подумать какое же ядро собрать. Ядро может быть:")]),e._v(" "),s("p",[s("strong",[e._v("- монолитным")])]),e._v(" "),s("p",[e._v("такое ядро полностью грузится при старте системы и остаётся в оперативной памяти\nдо выключения машины. Его компоненты нельзя изменить, невозможно подгружать и\nвыгружать модули благодаря чему ядро становится нечувствительным к различным\nтроянским программам, направленным на подмену оригинальных модулей своими - это\nпросто невозможно. Но с другой стороны монолитность ядра привносит и некоторые минусы,\nтакие как невозможность установить стороннюю прошивку или проприетарный драйвер для\nвидеокарты (ведь его модуль нельзя будет подгрузить!). То есть для домашних машин\nлучше не использовать монолитные ядра, а вот для серверов - самое оно.")]),e._v(" "),s("p",[s("strong",[e._v("- модульным")])]),e._v(" "),s("p",[e._v("это ядро напротив позволит включать многие компоненты не жёстко, а модульно\n(соответственно своему названию), что уменьшит размер ядра и сделает возможным...\nда, загрузку и выгрузку нужных модулей. В готовых дистрибутивах для создания такого\nядра используется initramfs (раньше - initrd). Но при сборке под себя можно обойтись\nи без него, достаточно лишь жёстко встроить поддержку файловой системы и контроллёра\nHD корневого раздела для того, чтобы система смогла определить их и загрузиться.")]),e._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("На заметку")]),e._v(" "),s("p",[e._v("в чём разница между initrd и initramfs http://teleology.mobi/ru/news_ru/15032006-01_ru.")])]),e._v(" "),s("p",[e._v("Обычно предлагается включить в ядро жёстко те компоненты, которые нужны вам постоянно,\nа те, что предполагается использовать время от времени, включить модулями.")]),e._v(" "),s("p",[e._v("Итак, вы скачали ядро и заплатки. Переместите их в каталог "),s("code",[e._v("/usr/src/")]),e._v(" и\nсами перейдите в него. Теперь следует распаковать исходники ядра и архивы с заплатками, наложить\nзаплатки:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# tar xvf linux-3.6.11.tar.bz2\n# cp patch-3.6.11.bz2 linux-3.6.11/\n# bzip2 -d patch-3.6.11.bz2\n# patch -p1 -i patch-3.6.11.bz2\n")])])]),s("p",[e._v("При наложении заплаток есть лишь один нюанс: сначала накладывается заплатка\nдля обновления версии ядра ("),s("code",[e._v("patch-$VERSION.bz2")]),e._v(" как дано выше) и уже затем\nвсе остальные.")]),e._v(" "),s("p",[e._v("Обратите внимание на вывод команды "),s("code",[e._v("patch")]),e._v(". Если заплатка идеально подходит к\nядру, то в выводе должны быть только строчки "),s("code",[e._v("patching file ...")]),e._v(" .\nСтрока "),s("code",[e._v("Hunk #1 succeeded at...")]),e._v(" означает что заплатка наложена успешно,\nно место наложения сдвинуто на несколько строк. Если же вы увидите\nслово "),s("code",[e._v("Failed")]),e._v(" —  заплатка не подходит. Лучше удалить каталог "),s("code",[e._v("linux-3.6.11/")]),e._v("\nи начать все сначала уже без этой заплатки.")]),e._v(" "),s("p",[e._v("Далее могут выполнены следующие команды:")]),e._v(" "),s("p",[s("code",[e._v("make mrproper")]),e._v(" - очистит каталог от мусора предыдущей сборки")]),e._v(" "),s("p",[s("code",[e._v("make menuconfig")]),e._v(" - запустит окно настроек ядра")]),e._v(" "),s("p",[s("code",[e._v("[ * ]")]),e._v(" - опция включена жёстко")]),e._v(" "),s("p",[s("code",[e._v("[M]")]),e._v(" - опция включена модульно")]),e._v(" "),s("p",[s("code",[e._v("[ ]")]),e._v(" - опция отключена")]),e._v(" "),s("p",[e._v("Вы можете воспользоваться поиском по параметрам ядра, для этого\nнажмите "),s("code",[e._v('"/"')]),e._v(" (слеш) и введите искомое. Также не забывайте о справке:\nостановитесь на параметре, подробное описание которого вам хотелось бы видеть,\nи выбирайте "),s("code",[e._v('"Help"')]),e._v(" внизу экрана.")]),e._v(" "),s("h2",{attrs:{id:"general-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#general-setup","aria-hidden":"true"}},[e._v("#")]),e._v(" General setup")]),e._v(" "),s("p",[e._v("Содержит общие настройки")]),e._v(" "),s("p",[s("img",{attrs:{src:t(158),alt:"gen"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Prompt for development and/or incomplete code/drivers\n")])])]),s("p",[e._v("Некоторые вещи, которые поддерживает Linux (таких, как сетевые драйверы,\nфайловые системы, сетевые протоколы и т.д.) могут находиться в состоянии\nразработки, где функциональность, стабильность или уровень тестирование еще\nне достаточно высоки для общего использования. То есть данная опция включает\nдополнительные экспериментальные настройки. Рекомендуется включить, чтобы\nотображались все доступные опции.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("()  Local version - append to kernel release\n")])])]),s("p",[e._v("Сюда можно внести наименование, которым дополнится название вашего ядра.\nБывает полезно, когда вы собираете несколько ядер одной и той же версии. Обычно не нужно.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Kernel compression mode (Gzip)  ---\x3e\n  (X) Gzip\n  ( ) Bzip2\n  ( ) LZMA\n  ( ) XZ\n  ( ) LZO\n")])])]),s("p",[e._v("Доступные алгоритмы сжатия, отличающиеся по скорости, эффективности,\nкомпрессии и декомпрессии. Скорость сжатия имеет значение только при сборке ядра.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Support for paging of anonymous memory (swap)\n")])])]),s("p",[e._v("Поддержка ядром своп-файла. Включаем.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] System V IPC\n    [*] POSIX Message Queues\n    [*] BSD Process Accounting\n    [ ] BSD Process Accounting version 3 file format\n")])])]),s("p",[s("code",[e._v("System V IPC")]),e._v(" — механизм связи между процессами. Набор библиотечных\nфункций и вызовов ядра, позволяющий процессам обмениваться информацией. Некоторые\nпрограммы требуют этого механизма.")]),e._v(" "),s("p",[s("code",[e._v("POSIX Message Queues")]),e._v(" — очередь для сообщений формата POSIX с использованием\nприоритетов. Часть механизма связи между процессами. Нужно, если запускать программы написанные под этот формат, например с ОС Solaris.")]),e._v(" "),s("p",[s("code",[e._v("BSD Process Accounting")]),e._v(" — поддержка дополнительных сведений о процессах\n(время запуска, владелец, командная строка запуска, использование памяти).\nПолезно для контроля процессов.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Auditing support\n    [*] Enable system-call auditing support\n    [ ] Make audit loginuid immutable\n")])])]),s("p",[s("code",[e._v("Auditing support")]),e._v(" — включение механизма проверки ядра. Например\nиспользуется системой SELinux (система расширенной безопасности для Linux).")]),e._v(" "),s("p",[s("code",[e._v("Enable system-call auditing support")]),e._v(" — включение системных вызовов для\nмеханизма проверки ядра.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> Kernel .config support\n")])])]),s("p",[e._v("Сохранять настройки ядра в нем самом. Это полезно, если у Вы удалите папку с\nисходниками ядра, а потом захотите немного изменить ядро.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Enable access to .config through /proc/config.gz\n")])])]),s("p",[e._v("Если эта опция включена, вы сможете получать параметры текущего ядра из\n"),s("code",[e._v("/proc/config.gz")])]),e._v(" "),s("p",[e._v("Рекомендуется включить. Пригодится.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Control Group support  ---\x3e\n\n    [ ] Example debug cgroup subsystem\n    [*] Freezer cgroup subsystem\n    [ ] Device controller for cgroups\n    [*] Cpuset support\n    [*] Include legacy /proc/<pid>/cpuset file\n    [*] Simple CPU accounting cgroup subsystem\n    [*] Resource counters\n    [ ] Memory Resource Controller for Control Groups\n    [ ] HugeTLB Resource Controller for Control Groups\n    [ ] Enable perf_event per-cpu per-container group\n    [*] Group CPU scheduler  ---\x3e\n        [*] Group scheduling for SCHED_OTHER\n        [ ] Group scheduling for SCHED_RR/FIFO\n    [ ] Block IO controller\n")])])]),s("p",[e._v("Поддержка группирования процессов. Используется такими подсистемами как CPUSETS,\nCFS, контроль памяти или устройства изоляции.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-*- Namespaces support  ---\x3e\n")])])]),s("p",[e._v("Позволяет двум процессам в разных виртуальных средах иметь один и тот же "),s("code",[e._v("pid")]),e._v(".\nЭта возможность делает реальными такие сценарии, как апгрейд сервера без необходимости его перезагрузки.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-*- Kernel->user space relay support (formerly relayfs)\n")])])]),s("p",[e._v("Включает поддержку интерфейса некоторых файловых систем (таких как debugfs). Предназначена для эффективного механизма передачи больших объёмов данных из пространства ядра в пользовательское пространство.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Initial RAM filesystem and RAM disk (initramfs/initrd) support\n")])])]),s("p",[e._v("Поддержка initrd/initramfs.")]),e._v(" "),s("p",[e._v("Если собирается ядро без оных, следует отключить опцию.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Optimize for size\n")])])]),s("p",[e._v("Оптимизация кода ядра по размеру. Может быть полезно для создания загрузочных дискет. В обычных случаях не требуется.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Profiling support\n")])])]),s("p",[e._v("Включение расширенной поддержки профилирования (например, OProfile). Обычно не нужно.")]),e._v(" "),s("h2",{attrs:{id:"enable-loadable-module-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enable-loadable-module-support","aria-hidden":"true"}},[e._v("#")]),e._v(" Enable loadable module support")]),e._v(" "),s("p",[s("img",{attrs:{src:t(159),alt:"loadable"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Forced module loading\n[*] Module unloading\n[*] Forced module unloading\n[ ] Module versioning support\n[ ] Source checksum for all modules\n")])])]),s("p",[e._v("Создание модульного ядра. "),s("code",[e._v("Module unloading")]),e._v(" — возможность выгрузки модулей.")]),e._v(" "),s("p",[s("code",[e._v("Forced module unloading")]),e._v(" — возможность принудительной выгрузки модуля, даже если оно еще нужно ядру")]),e._v(" "),s("h2",{attrs:{id:"enable-the-block-layer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enable-the-block-layer","aria-hidden":"true"}},[e._v("#")]),e._v(" Enable the block layer")]),e._v(" "),s("p",[s("img",{attrs:{src:t(160),alt:"block"}})]),e._v(" "),s("p",[e._v("Поддержка блочных устройств. Если эта опция отключена, некоторые файловые системы станут недоступны (например, ext3), SCSI и USB устройства не смогут распознаться.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Block layer SG support v4\n  Partition Types  ---\x3e\n    [*] Advanced partition selection\n    [ ] Macintosh partition map support\n    [*] PC BIOS (MSDOS partition tables) support\n    [ ] BSD disklabel (FreeBSD partition tables) support\n    [ ] SGI partition support\n    [ ] EFI GUID Partition support\n")])])]),s("p",[e._v("Следует выбрать из списка типы разделов, поддержка которых вам необходима. PC BIOS для машин с обычным BIOS (на разделах MBR), EFI GUID — EFI BIOS (на разделах GPT). В общем, ясно из названий.")]),e._v(" "),s("h2",{attrs:{id:"processor-type-and-features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#processor-type-and-features","aria-hidden":"true"}},[e._v("#")]),e._v(" Processor type and features")]),e._v(" "),s("p",[s("img",{attrs:{src:t(161),alt:"processors"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Symmetric multi-processing support\n")])])]),s("p",[e._v("Поддержка симметричной мультипроцессорности. Включается в случае, если у вас\nмногопроцессорный компьютер или многоядерный процессор.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Preemption Model (Voluntary Kernel Preemption (Desktop)) ---\x3e\n  Voluntary Kernel Preemption (Desktop)\n")])])]),s("p",[e._v("Повысит отзывчивость десктопных приложений. Как отметил в комментариях "),s("em",[e._v("UlvHare")]),e._v(" в плане\nзапуска таких приложений как Firefox Low-Latency Desktop Preemptible Mode хуже, чем Voluntary.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Enable MPS table\n")])])]),s("p",[e._v("Для старых систем SMP, которые не имеют надлежащей поддержки ACPI.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Support for extended (non-PC) x86 platforms\n")])])]),s("p",[e._v("Поддержка платформ, отличных от PC.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Paravirtualized guest support  ---\x3e\n")])])]),s("p",[e._v("Поддержка паравиртуализации (например, для Xen).")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Processor family (Core 2/newer Xeon)  ---\x3e\n\n  ( ) Opteron/Athlon64/Hammer/K8\n  ( ) Intel P4 / older Netburst based Xeon\n  (X) Core 2/newer Xeon\n  ( ) Intel Atom\n  ( ) Generic-x86-64\n")])])]),s("p",[e._v("Следует выбрать тип своего процессора. Если не знаете или рассчитываете использовать созданную конфигурацию ядра на разных машинах, отмечайте Generic.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] SMT (Hyperthreading) scheduler support\n")])])]),s("p",[e._v("Включение технологии Hyperthreading.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Multi-core scheduler support\n")])])]),s("p",[e._v("Для процессоров Intel Core, AMD Athlon64/Phenom.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] EFI runtime service support\n[ ] EFI stub support\n")])])]),s("p",[e._v("Для поддержки UEFI. В данном примере она отключена.")]),e._v(" "),s("h2",{attrs:{id:"power-management-and-acpi-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#power-management-and-acpi-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Power management and ACPI options")]),e._v(" "),s("p",[s("img",{attrs:{src:t(162),alt:"power"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Suspend to RAM and standby\n")])])]),s("p",[e._v("Поддержка Suspend to RAM - сохранение состояния операционной системы в оперативной памяти.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Hibernation (aka 'suspend to disk')\n()  Default resume partition\n")])])]),s("p",[e._v("Поддержка Suspend to Disk - иначе говоря, режим гибернации. Потребуется включение swap-раздела. В "),s("code",[e._v("Default resume partition")]),e._v(" можно прописать путь к swap. Или оставить пустым с последующим внесением параметра resume в строку загрузчика. Лучше прописать к загрузчику.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] ACPI(Advanced Configuration and Power Interface)Support ---\x3e\n    <M> EC read/write access through /sys/kernel/debug/ec\n    [ ] Deprecated /proc/acpi/event support\n    <M> AC Adapter\n    <M> Battery\n    {M} Button\n    {M} Video\n    <M> Fan\n    [*] Dock\n    <M> Processor\n    <M> Thermal Zone\n")])])]),s("p",[e._v("Поддержка интерфейса управления конфигурацией и питанием (ACPI).")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("CPU Frequency scaling  ---\x3e\n  [*] CPU Frequency scaling\n  < > CPU frequency translation statistics\n  Default CPUFreq governor (ondemand)  ---\x3e\n  -*- 'performance' governor\n  < > 'powersave' governor\n  < > 'userspace' governor\n  -*- 'ondemand' cpufreq policy governor\n  < > 'conservative' cpufreq governor\n")])])]),s("p",[e._v("Управление настройками частоты процессора: "),s("code",[e._v("'performance'")]),e._v(" governor обеспечивает наибольшую производительность, "),s("code",[e._v("'powersave'")]),e._v(" governor будет стараться снижать частоту процессора, чем увеличит работу от батареи, "),s("code",[e._v("'ondemand'")]),e._v(" - нечто среднее. Рекомендуется выбрать "),s("code",[e._v("'ondemand'")]),e._v(' в качестве "умолчательного" в  '),s("code",[e._v("Default CPUFreq governor")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"bus-options-pci-etc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bus-options-pci-etc","aria-hidden":"true"}},[e._v("#")]),e._v(" Bus options (PCI etc.)")]),e._v(" "),s("p",[s("img",{attrs:{src:t(163),alt:"bus"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] PCI support\n[*] Support mmconfig PCI config space access\n[*] PCI Express support\n< > PCI Express Hotplug driver\n[*] Root Port Advanced Error Reporting support\n")])])]),s("p",[e._v("PCI support обеспечивает поддержку шины PCI.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> PCCard (PCMCIA/CardBus) support  ---\x3e\n")])])]),s("p",[e._v("Поддержка карт PCMCIA. Чаще всего встречаются на ноутбуках.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> Support for PCI Hotplug  ---\x3e\n")])])]),s("p",[e._v('"Горячее" (на лету) подключение PCI-устройств. Позволяет добавлять и удалять PCI-устройства, даже когда машина включена и работает. В принципе, можно и отключить, поскольку чаще всего эта возможность не используется.')]),e._v(" "),s("h2",{attrs:{id:"executable-file-formats-emulations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#executable-file-formats-emulations","aria-hidden":"true"}},[e._v("#")]),e._v(" Executable file formats / Emulations")]),e._v(" "),s("p",[s("img",{attrs:{src:t(164),alt:"exec"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Kernel support for ELF binaries\n[*] Write ELF core dumps with partial segments\n<*> Kernel support for MISC binaries\n[*] IA32 Emulation\n")])])]),s("p",[e._v("Поддержка формата исполняемых файлов ELF. Обязательна к включению.")]),e._v(" "),s("h2",{attrs:{id:"networking-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#networking-support","aria-hidden":"true"}},[e._v("#")]),e._v(" Networking support")]),e._v(" "),s("p",[s("img",{attrs:{src:t(165),alt:"net"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Networking options  ---\x3e\n")])])]),s("p",[e._v("В подпунктах включается поддержка протокола TCP/IP, в частности возможность включения/отключения IPv6. Поскольку автор не является специалистом в данной области, детально раздел не рассматривается. Сетевые администраторы, безусловно, найдут для себя множество полезных опций. Для домашнего же использования рекомендуется оставить опции по-умолчанию.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("< >   IrDA (infrared) subsystem support  ---\x3e\n")])])]),s("p",[e._v("Скорее всего включать не понадобится. Обеспечивает поддержку инфракрасного модуля.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("< >   Bluetooth subsystem support  ---\x3e\n        Bluetooth device drivers  ---\x3e\n")])])]),s("p",[e._v("Для тех, у кого встроен модуль беспроводной передачи данных bluetooth. Как правило, сейчас это ноутбуки. Хотя ранее bluetooth был достаточно популярен и соответствующие устройства покупались и использовались на настольных ПК.")]),e._v(" "),s("p",[s("code",[e._v("Bluetooth device drivers")]),e._v(" позволит выбрать из списка поддержку определённого устройства.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<M>   RF switch subsystem support  ---\x3e\n")])])]),s("p",[e._v('Для ноутбуков, где, как правило, радиопередатчик wifi-чипа включается нажатием клавиши  "Kill Switch". Если эта клавиша не нажата и передатчик не включен, wi-fi не заведётся. Кстати, если параллельно у вас установлена Windows, обязательно оставьте под ней включенной кнопку wi-fi. В противном случае в linux при попытке включить интерфейс wlan вам будут объяснять, что Kill Switch отключен и включать его будет бесполезно.')]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-*-   Wireless  ---\x3e\n    <M> cfg80211 - wireless configuration API\n    [*] cfg80211 wireless extensions compatibility\n")])])]),s("p",[e._v("Поддержка стандарта 802.11 для беспроводных сетей.")]),e._v(" "),s("h2",{attrs:{id:"device-drivers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#device-drivers","aria-hidden":"true"}},[e._v("#")]),e._v(" Device Drivers")]),e._v(" "),s("p",[s("img",{attrs:{src:t(166),alt:"device"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Generic Driver Options  ---\x3e\n    (/sbin/hotplug) path to uevent helper\n    [*] Maintain a devtmpfs filesystem to mount at /dev\n    [*] Automount devtmpfs at /dev, after the kernel mounted the ro\n    [*] Select only drivers that don't need compile-time external fir\n    [*] Prevent firmware from being built\n     -*- Userspace firmware loading support\n    [*] Include in-kernel firmware blobs in kernel binary\n    () External firmware blobs to build into the kernel binary\n    [ ] Driver Core verbose debug messages\n    [*] Managed device resources verbose debug messages\n")])])]),s("p",[s("code",[e._v("Maintain a devtmpfs filesystem to mount at /dev")]),e._v(" — Монтировать файловую систему tmpfs.")]),e._v(" "),s("p",[s("code",[e._v("Select only drivers that don't need compile-time external fir")]),e._v(" — выбирать лишь те драйверы, которые не требуют прошивки. В зависимости от вашего оборудования эту опцию, возможно, придётся отключить.")]),e._v(" "),s("p",[s("code",[e._v("Include in-kernel firmware blobs in kernel binary")]),e._v(" — включить прошивку в ядро.")]),e._v(" "),s("p",[s("code",[e._v("External firmware blobs to build into the kernel binary")]),e._v(" — требуется для указания пути к блобам.")]),e._v(" "),s("p",[e._v("Например:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("radeon/BTC_rls.bin radeon/CAICOS_mc.bin radeon/CAICOS_me.bin radeon/CAICOS_pfp.bin\n")])])]),s("p",[e._v("Но в таком случае требуется включить в конфигурационный файл ядра строку с указанием директории, в которой находятся эти блобы:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('CONFIG_EXTRA_FIRMWARE_DIR="/lib/firmware"\n')])])]),s("p",[e._v("Идём далее:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("< > Parallel port support  ---\x3e\n-*- Plug and Play support  ---\x3e\n")])])]),s("p",[e._v("Первое уже вряд ли нужно. Но если у вас есть устройства ( раньше это были все принтеры ), требующие подключения по параллельному порту - включите опцию.")]),e._v(" "),s("p",[e._v("Plug and Play включаем.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Block devices  ---\x3e\n    <*> Loopback device support\n    <*> RAM block device support\n")])])]),s("p",[e._v("Блочные устройства. "),s("code",[e._v("Loopback device support")]),e._v(" включить обязательно.")]),e._v(" "),s("p",[s("code",[e._v("RAM block device support")]),e._v(' нужен при сборке ядра с initrd, в противном случае - отключить: "выбирайте Y, если хотите использовать часть оперативной памяти как блочное устройство. В этом устройстве вы сможете создавать файловую систему, и использовать ее как обыкновенное блочное устройство (такое как жесткий диск). Обычно его используют для загрузки и сохранения минимальной копии корневой файловой системы при загрузке с флоппи диска, CD-ROM при установке дистрибутива, или на бездисковых рабочих станциях."')]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Misc devices  ---\x3e\n")])])]),s("p",[e._v("Просмотреть и принять решение включать или не включать то или иное устройство. У автора данный раздел вообще пуст.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("SCSI device support  ---\x3e\n  -*- SCSI device support\n  [*] legacy /proc/scsi/ support\n  *** SCSI support type (disk, tape, CD-ROM) ***\n  <*> SCSI disk support\n  <*> SCSI CDROM support\n  [*]   Enable vendor-specific extensions (for SCSI CDROM)\n  <*> SCSI generic support\n  [*] Verbose SCSI error reporting (kernel size +=12K)\n")])])]),s("p",[e._v("Поддержка устройств SCSI. В современных машинах без включения этих опций могут быть не найдены такие устройства как жёсткий диск и CD-привод.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> Serial ATA and Parallel ATA drivers  ---\x3e\n    [*] Verbose ATA error reporting\n    [*] ATA ACPI Support\n    [*] SATA Port Multiplier support\n    *** Controllers with non-SFF native interface ***\n    <*> AHCI SATA support\n")])])]),s("p",[e._v("Поддержка устройств SATA. AHCI (Advanced Host Controller Interface) - механизм, позволяющий устройствам SATA пользоваться расширенными функциями.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[ ] Multiple devices driver support (RAID and LVM)  ---\x3e\n")])])]),s("p",[e._v("Опции, обеспечивающие использование логических томов и программных RAID-массивов.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Network device support  ---\x3e\n    [*]   Ethernet driver support  ---\x3e\n    <*>   PPP (point-to-point protocol) support\n    USB Network Adapters  ---\x3e\n    [*]   Wireless LAN  ---\x3e\n")])])]),s("p",[e._v("В "),s("code",[e._v("Ethernet driver support")]),e._v(" следует выбрать поддержку устройства вашей сетевой карты Ethernet. PPP может понадобиться тем, кто подключается к интернету с использованием соответствующего протокола. USB Adapters - при наличии у вас поднобного адаптера для выхода в сеть. Wireless LAN - для использования беспроводных сетей стандарта IEEE 802.11. Здесь нужно выбрать соответствующий вашему оборудованию драйвер.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Input device support  ---\x3e\n")])])]),s("p",[e._v("Нужен для определения различных устройств ввода как то: мыши, тачпады, тачскрины, джойстики, клавиатура и иные устройства. Предлагается немного побродить по списку и выбрать нужные опции.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("{*} I2C support  ---\x3e\n")])])]),s("p",[e._v("Поддержка видео в Linux.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> Multimedia support  ---\x3e\n    [*] Cameras/video grabbers support\n    [*] Media USB Adapters  ---\x3e\n    <*> USB Video Class (UVC)\n    [*] UVC input events device support\n")])])]),s("p",[e._v("Поддержка веб-камер и захвата видео.  Нужно включить, если имеется встроенная камера или предполагается подключать камеру внешнюю.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Graphics support  ---\x3e\n  <*> /dev/agpgart (AGP Support)  ---\x3e\n  <*>   AMD Opteron/Athlon64 on-CPU GART support\n  <*>   Intel 440LX/BX/GX, I8xx and E7x05 chipset support\n")])])]),s("p",[e._v("Включение поддержки AGP. В примере для видеокарт Intel и Radeon.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Laptop Hybrid Graphics - GPU switching support\n")])])]),s("p",[e._v("Включается, если на машине более одной видеокарты. Подробнее об этой проблеме\nможно узнать в "),s("router-link",{attrs:{to:"/posts/gentoo2/"}},[e._v("соответствующем посте")]),e._v(".")],1),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<M> Direct Rendering Manager\n")])])]),s("p",[e._v("Включить DRM - Direct Rendering Manager. Современная вещь, рекомендуется.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("{*} Support for frame buffer devices  ---\x3e\n    [*] Enable Video Mode Handling Helpers\n    [*] Enable Tile Blitting Support\n    [*] EFI-based Framebuffer Support\n")])])]),s("p",[e._v("Управление поддержкой фреймбуфера. EFI-based Framebuffer Support нужен для систем с UEFI.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Console display driver support  ---\x3e\n   {*} Framebuffer Console support\n")])])]),s("p",[e._v("Поддержка кадрового буфера в консоли. Включаем.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Bootup logo  ---\x3e\n   [*] Standard 224-color Linux logo\n")])])]),s("p",[e._v("Включаем пингвинов при загрузке системы 😉")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> Sound card support  ---\x3e\n    <*>   Advanced Linux Sound Architecture  ---\x3e\n")])])]),s("p",[e._v("Включение поддержки звуковых устройств. Выбор своего железа из списка.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] USB support  ---\x3e\n")])])]),s("p",[e._v("Аналогично, только для USB-устройств.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] X86 Platform Specific Device Drivers  ---\x3e\n")])])]),s("p",[e._v("Имеет смысл посмотреть владельцам ноутбуков. Особенно тем, у кого не\nработает контроль яркости экрана или горячие клавиши. Для владельцев MXM видеокарт там же включить:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<*> WMI Support for MXM Laptop Graphics\n")])])]),s("h2",{attrs:{id:"firmware-drivers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#firmware-drivers","aria-hidden":"true"}},[e._v("#")]),e._v(" Firmware Drivers")]),e._v(" "),s("p",[s("img",{attrs:{src:t(167),alt:"firmware"}})]),e._v(" "),s("p",[e._v("Для включения в ядро сторонних прошивок. Если вы не уверены, что вам нужны какие-либо опции, рекомендуется оставить вариант по-умолчанию.")]),e._v(" "),s("h2",{attrs:{id:"file-systems"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-systems","aria-hidden":"true"}},[e._v("#")]),e._v(" File systems")]),e._v(" "),s("p",[s("img",{attrs:{src:t(168),alt:"filesys"}})]),e._v(" "),s("p",[e._v("Осуществляет поддержку тех или иных файловых систем, поддержку квотирования, а также выбор нативных языков (вернее того, как будут отображаться символы). В целом, в комментариях не нуждается. Единственное замечание: если вы собираете ядро без initrd нужно включить используемые при загрузке файловые системы жёстко, а не модулями.")]),e._v(" "),s("h2",{attrs:{id:"kernel-hacking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kernel-hacking","aria-hidden":"true"}},[e._v("#")]),e._v(" Kernel hacking")]),e._v(" "),s("p",[s("img",{attrs:{src:t(169),alt:"kern_hack"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[*] Magic SysRq key\n")])])]),s("p",[e._v("Если компьютер завис и не реагирует на команды переключения консоли. Вы можете нажать "),s("code",[e._v("Alt-PrintScreen-s")]),e._v(" для записи кеша дисков или "),s("code",[e._v("Alt-PrintScreen-i")]),e._v(" (Убить все процессы за исключением init). Механизм нажатия такой: - Нажать "),s("code",[e._v("Alt")]),e._v(" - Нажать "),s("code",[e._v("PrintScreen")]),e._v(" - Отпустить "),s("code",[e._v("Alt")]),e._v(" - Нажать нужную кнопку - Отпустить все.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("-*- Debug Filesystem\n")])])]),s("p",[e._v("Когда эта опция включена, можно монтировать debugfs в "),s("code",[e._v("/etc/fstab")]),e._v(". Таким образом мы получим директорию "),s("code",[e._v("/sys/kernel/debug")]),e._v(", что очень небесполезно в частности для обладателей двух видеокарт.")]),e._v(" "),s("h2",{attrs:{id:"security-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-options","aria-hidden":"true"}},[e._v("#")]),e._v(" Security options")]),e._v(" "),s("p",[s("img",{attrs:{src:t(170),alt:"secur"}})]),e._v(" "),s("p",[e._v("Позволяет увеличить защищенность системы. Можно, например, запретить запуск программ с привилегиями root без специального ключа или с помощью системы SELinux ограничить возможности доступа к файлам самого root. Изменяйте эти опции только если вы знаете что делаете.")]),e._v(" "),s("h2",{attrs:{id:"cryptographic-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cryptographic-api","aria-hidden":"true"}},[e._v("#")]),e._v(" Cryptographic API")]),e._v(" "),s("p",[s("img",{attrs:{src:t(171),alt:"cryp"}})]),e._v(" "),s("p",[e._v("Опции шифрования. Пригодятся, если у вас имеются закодированные файловые системы. Так же как и с предыдущим пунктом: изменяйте эти опции только если вы знаете что делаете.")]),e._v(" "),s("h2",{attrs:{id:"virtualization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#virtualization","aria-hidden":"true"}},[e._v("#")]),e._v(" Virtualization")]),e._v(" "),s("p",[s("img",{attrs:{src:t(172),alt:"virt"}})]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("<M>  Kernel-based Virtual Machine (KVM) support\n<M>  KVM for Intel processors support\n< >  KVM for AMD processors support\n")])])]),s("p",[e._v("Нужно включить, если планируется использовать виртуализацию (конкретно: VirtualBox или QEMU). В противном случае не отмечайте ничего.")]),e._v(" "),s("h2",{attrs:{id:"library-routines"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#library-routines","aria-hidden":"true"}},[e._v("#")]),e._v(" Library routines")]),e._v(" "),s("p",[s("img",{attrs:{src:t(173),alt:"lib"}})]),e._v(" "),s("p",[e._v("Используется для предоставления модулям функций CRC32 CRC32c. Можете включить")]),e._v(" "),s("h2",{attrs:{id:"посnесnовие"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#посnесnовие","aria-hidden":"true"}},[e._v("#")]),e._v(" Послесловие")]),e._v(" "),s("p",[e._v("Итак, настройка ядра закончена. Теперь коснёмся вопроса о сборке. Процесс сборки и установки ядра можно выполнить одной командой:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# make bzImage modules modules_install install\n")])])]),s("p",[e._v("Когда ядро будет собрано, у Вас должны появиться следующие файлы:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("/boot/vmlinuz-3.6.11\n/boot/System.map-3.6.11\n/boot/initrd-3.6.11.img\n")])])]),s("p",[e._v("и каталог модулей")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("/lib/modules/3.6.11\n")])])]),s("p",[e._v("И последним шагом подправим строки загрузчика, чтобы можно было загрузиться с новым ядром (пример для grub-legacy):")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# /boot/grub/menu.lst")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\ndefault "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("timeout")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("30")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("splashimage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("hd0,1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("/boot/grub/splash.xpm.gz\ntitle Linux "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.6")]),e._v(".11\nroot "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("hd0,1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nkernel /boot/vmlinuz-3.6.11 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/dev/ram0 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("real_root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/dev/sda3\ninitrd /boot/initrd-3.6.11\n")])])]),s("p",[e._v("Для тех, кому любопытно собрать ядро без initrd, милости прошу:\n"),s("a",{attrs:{href:"http://alv.me/?p=58",target:"_blank",rel:"noopener noreferrer"}},[e._v("лишнему в ядре не место"),s("OutboundLink")],1),e._v(". Хотя и следуя представленным выше указаниям также можно собрать такое ядро. Но статья, приведённая по ссылке, позволит лучше понять зачем это нужно и нужно ли оно вообще.")]),e._v(" "),s("p",[e._v("Единственное, что там не указано: как в этом случае будут выглядеть\nнастройки загрузчика. В них больше не будет указания на initrd — последней\nстроки — и ram0:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# /boot/grub/menu.lst")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\ntitle Linux "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.6")]),e._v(".11\nroot "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("hd0,1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nkernel /boot/vmlinuz-3.6.11 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/dev/sda3\n")])])]),s("p",[e._v("Если сборка не первая, вы увидите в "),s("code",[e._v("/boot")]),e._v(" старое ядро, оно будет выглядеть\nкак "),s("code",[e._v("vmlinuz-$KERNEL-VERSION.old")]),e._v(". В случае неудачной сборки, вы всегда можете загрузиться со старым ядром.")]),e._v(" "),s("p",[s("strong",[e._v("P.S:")]),e._v(" при указанном способе сборки в gentoo автоматически не появится initrd. Если он вам нужен, наиболее простой способ: после сборки ядра использовать для его создания "),s("code",[e._v("genkernel")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# genkernel --install initramfs\n")])])]),s("p",[s("strong",[e._v("P.S2:")]),e._v(" не забудьте добавить своего пользователя в соответствующие группы. Если нет звука, прежде всего проверьте, добавлен ли пользователь в группу "),s("code",[e._v("audio")]),e._v(", если не заводится камера — в группу "),s("code",[e._v("video")]),e._v(".")]),e._v(" "),s("p",[e._v("Да, надо бы ещё отметить, что при необходимости можно обратиться к документации ядра.\nРасполагаются эти файлы в каталоге "),s("code",[e._v("/usr/src/linux/Documentation")]),e._v(". Вот, вроде бы, и всё.")])])},[],!1,null,null,null);a.default=r.exports}}]);