(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{225:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("NPM — пакетный менеджер JavaScript. Он управляет зависимостями как для\nклиентской стороны, так и для серверной. Если вы намерены выложить исходный код\nсвоего проекта и иметь возможность устанавливать его как отдельный компонент,\nлучший способ сделать это — создать пакет.")]),s._v(" "),a("h2",{attrs:{id:"что-дnя-этого-нужно"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#что-дnя-этого-нужно","aria-hidden":"true"}},[s._v("#")]),s._v(" Что для этого нужно?")]),s._v(" "),a("p",[s._v("Для начала установить пакетный менеджер, если это ещё не было сделано. Установка\nзависит от используемой вами операционной системы, описывать её не вижу смысла:\nматериала по этому вопросу предостаточно.")]),s._v(" "),a("h3",{attrs:{id:"акканут"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#акканут","aria-hidden":"true"}},[s._v("#")]),s._v(" Акканут")]),s._v(" "),a("p",[s._v("Первый шаг самый тривиальный. Зарегистрируйтесь на "),a("a",{attrs:{href:"https://www.npmjs.com/signup",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.com"),a("OutboundLink")],1),s._v(".\nПосле этого вы сможете публиковать пакеты от своего имени прямо из командной строки.\nВведите команду:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\nUsername: your_name\nPassword:\nEmail: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("this IS public"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" your_name@domain.com\nLogged "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" on https://registry.npmjs.org/.\n")])])]),a("h3",{attrs:{id:"подготовка-проекта-к-пубnикации"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#подготовка-проекта-к-пубnикации","aria-hidden":"true"}},[s._v("#")]),s._v(" Подготовка проекта к публикации")]),s._v(" "),a("p",[s._v("Помимо самого кода, обязательно приложить файл README.md, содержащий описание\nтого как подключить и использовать пакет.")]),s._v(" "),a("p",[s._v("Ещё надо обзавестись файлом "),a("code",[s._v("package.json")]),s._v(", где хранятся основные сведения о\nпакете и прописаны его зависимости, если таковые имеются. В директории проекта\nсоздаём этот файл командой "),a("code",[s._v("npm init")]),s._v(", вносим подходящее описание и консольные\nкоманды в секцию scripts (опять же если они есть):")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mypackage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The best package in the world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"command for testing package"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git+https://github.com/myname/mypackage.git"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"package"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"me"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MIT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bugs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/myname/mypackage/issues"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"homepage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/myname/mypackage#readme"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("Осталось только закоммитить изменения и выложить код на github.")]),s._v(" "),a("h3",{attrs:{id:"тестируем-пакет"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#тестируем-пакет","aria-hidden":"true"}},[s._v("#")]),s._v(" Тестируем пакет")]),s._v(" "),a("p",[s._v("Всегда тестируйте работоспособность своего творения прежде, чем публиковать\nего в репозиторий npm.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# установка пакета из github")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mypackage\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# или локально с указанием пути к модулю")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" path_to_mypackage/mypackage\n")])])]),a("h3",{attrs:{id:"пубnикация"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#пубnикация","aria-hidden":"true"}},[s._v("#")]),s._v(" Публикация")]),s._v(" "),a("p",[s._v("Находясь в директории проекта, скомандуйте "),a("code",[s._v("npm publish")]),s._v(". Вы должны увидеть\nчто-то подобное:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("+ mypackage@1.0.0\n")])])]),a("p",[s._v("Теперь пакет можно найти в репозитории npm через поиск или по прямому адресу\nnpmjs.com/package/mypackage. Любой может установить его как зависимость своего\nсобственного проекта командой "),a("code",[s._v("npm install mypackage --save")]),s._v(".")]),s._v(" "),a("p",[s._v("Если вы дорабатывали программу позже и пакет оказался в неактуальном состоянии,\nизмените версию в "),a("code",[s._v("package.json")]),s._v(" и снова опубликуйте его через "),a("code",[s._v("npm publihs")]),s._v(".")]),s._v(" "),a("h2",{attrs:{id:"es6-модуnи"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-модуnи","aria-hidden":"true"}},[s._v("#")]),s._v(" ES6-модули")]),s._v(" "),a("p",[s._v("Допустим, нужно использовать не commonJS, а модули ES6. Что тогда? Увы, нам не\nобойтись без транспайлера Babel.JS. Именно с его помощью будут проводиться все\nманипуляции. Ставим необходимые пакеты как зависимости нашей библиотеки.")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i --save-dev babel-cli babel-core babel-preset-es2015\n")])])]),a("p",[s._v("Также надо создать два каталога: один для исходников, другой — для\nскомпилированной версии скрипта. Это будут "),a("code",[s._v("src")]),s._v(" и "),a("code",[s._v("lib")]),s._v(" соответственно.")]),s._v(" "),a("p",[s._v("Для удобства пропишите нужные команды в "),a("code",[s._v("package.json")]),s._v(" своего проекта.")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compile"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel --presets es2015 -d lib/ src/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepublish"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run compile"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("Первая команда будет собирать файлы "),a("code",[s._v(".es6")]),s._v(" из исходников и\nпомещать их в "),a("code",[s._v("lib/")]),s._v(". Вторая — делать то же самое без вашего участия\nпри публикации пакета в npm-репозиторий.")]),s._v(" "),a("p",[s._v("Для коректной сборки нужно ещё немного магии. Создать "),a("code",[s._v(".gitignore")]),s._v(", поместить туда\nкаталог сборки "),a("code",[s._v("lib/")]),s._v(". В "),a("code",[s._v("package.json")]),s._v(" указать главный файл проекта, например:")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lib/mylibrary.js"')]),s._v("\n")])])]),a("p",[s._v("Таким образом, в git находятся только исходники, а при публикации в npm будут\nсобраны и файлы, пропущенные через транспайлер.")]),s._v(" "),a("p",[s._v("Для подключения модуля в конкретном проекте теперь можно установить его стандартным\nспособом и импортировать.")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ npm i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save mylibrary\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// подключаем")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" myfile "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mylibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])},[],!1,null,null,null);t.default=e.exports}}]);