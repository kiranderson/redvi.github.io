(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{204:function(t,s,e){"use strict";e.r(s);var a=e(3),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("RVM — Ruby Version Manager (менеджер управления пакетами в ruby)\nсослужит хорошую службу в тех частых ситуациях, когда вам может потребоваться\nзапуск нескольких версий ruby на одной машине или же нескольких проектов с разными\nнаборами gem'ов для них. Чем-то напоминает virtualenv, если сравнивать с аналогичным приложением для python.")]),t._v(" "),e("p",[t._v("Данный пост предположительно рассчитан на новоиспечённых рубистов и предназначен\nдля облегчения и в какой-то мере даже автоматизации их труда.")]),t._v(" "),e("p",[e("strong",[t._v("Что такое gem?")])]),t._v(" "),e("p",[t._v("Gem (драгоценный камень, жемчужина) — пакет ruby, предоставляющий\nкакую-то функциональность. Например, библиотека "),e("code",[t._v("redcarpet")]),t._v(", доступная в\nвиде gem'а, обеспечивает поддержку markdown.")]),t._v(" "),e("p",[e("strong",[t._v("Что такое gemset?")])]),t._v(" "),e("p",[t._v("Gemset (set: набор, комплект) — набор gem'ов.")]),t._v(" "),e("h2",{attrs:{id:"установка-rvm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#установка-rvm","aria-hidden":"true"}},[t._v("#")]),t._v(" Установка RVM")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("curl -L https://get.rvm.io "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\nDownloading RVM branch master\n% Total    % Received % Xferd  Average Speed\n                              Dload  Upload\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("124")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("124")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("107")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" 1084k  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" 1084k    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("   234k\n* To start using RVM you need to run\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /home/user/.rvm/scripts/rvm"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n")])])]),e("p",[t._v("Перезапускаем консоль и убеждаемся в том, что "),e("code",[t._v("rvm")]),t._v(" был успешно установлен:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ rvm -v\nrvm "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.23")]),t._v(".13\n\n$ rvm get stable --auto-dotfiles\n")])])]),e("p",[t._v("Дополним переменную PATH, дабы указать путь к директории rvm. Запись нужно\nсделать в "),e("code",[t._v(".bashrc")]),t._v(" или "),e("code",[t._v(".zshenv")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .bashrc")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v('/.rvm/bin"')]),t._v("\n")])])]),e("p",[t._v("Дальше любопытно было бы просмотреть список доступных для установки и уже установленных пакетов ruby.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ rvm list known "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# просмотреть все доступные для установки версии Ruby")]),t._v("\n$ rvm list       "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# все установленные версии Ruby")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("* ruby-1.9.3-p448 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" x86_64 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => - current - текущая версия")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =* - current && default - текущая и спользуется по-умолчанию")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  * - default - используемая по-умолчанию версия")]),t._v("\n")])])]),e("h2",{attrs:{id:"испоnьзование-разных-версий-ruby-и-gemset-ы"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#испоnьзование-разных-версий-ruby-и-gemset-ы","aria-hidden":"true"}},[t._v("#")]),t._v(" Использование разных версий ruby и gemset'ы")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ~/.rvm/scripts/rvm "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# активировать rvm")]),t._v("\n$ rvm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.9")]),t._v(".3 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# установить несколько версий ruby")]),t._v("\n$ rvm "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(".0\n$ rvm use ruby-2.0.0-p247 --default "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# переключиться на ruby 2 и использовать v2 по-умолчанию")]),t._v("\n$ rvm list\n   ruby-1.9.3-p448 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" x86_64 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("* ruby-2.0.0-p247 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" x86_64 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => - current")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =* - current && default")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  * - default")]),t._v("\n")])])]),e("p",[t._v("Для примера создадим gemset "),e("code",[t._v("jekyll")]),t._v(", где будут собраны все нужные одноимённому генератору статических страниц gem'ы.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ~/.rvm/scripts/rvm "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# «включаем» rvm")]),t._v("\n$ rvm use "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.9")]),t._v(".3@jekyll --create "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# создать gemset")]),t._v("\n$ rvm use "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.9")]),t._v(".3@jekyll --default "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# выбирать его по-умолчанию")]),t._v("\n$ gem "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" jekyll jekyll-tagging i18n "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# установка gem'ов")]),t._v("\n$ gem list "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# просмотр установленных в выбранном gemset'е gem'ов")]),t._v("\ni18n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.6")]),t._v(".5"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\njekyll "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),t._v(".1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\njekyll-tagging "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v(".0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nliquid "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v(".3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmaruku "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.7")]),t._v(".0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Gemset'ы создаются для определённой версии ruby. Так, при переключении с одной версии на другую вы будете всегда видеть разный набор gemset'ов: отображаются они также лишь для своей версии.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ rvm gemset list "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# набор gemset'ов для ruby2")]),t._v("\n\ngemsets "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" ruby-2.0.0-p247\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" example\n   global\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" workspace/jekyll "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# переход в директорию проекта, где используется ruby1.9")]),t._v("\n$ rvm gemset list     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# набор gemset'ов для ruby1.9")]),t._v("\n\ngemsets "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" ruby-1.9.3-p448\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   global\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" jekyll\n")])])]),e("p",[t._v("Но здесь мы забежали чуть вперёд. Дело в том, что при переходе в директорию проекта, автоматически меняется версия ruby и набор gemset'ов, о чём речь пойдёт чуть ниже.")]),t._v(" "),e("p",[t._v("Gemset'ы можно удалять(delete), очищать(), экспортировать(export) и импортировать(import) gem'ы из одного в gemset'a в другой. Наиболее часто используемые действия отражены в данной ниже таблице.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("команда")]),t._v(" "),e("th",[t._v("описание")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("rvm gemset create")]),t._v(" "),e("td",[t._v("создать новый gemset")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset export new.gems")]),t._v(" "),e("td",[t._v("экспорт списка gem'ов в файл new.gems")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset import new.gems")]),t._v(" "),e("td",[t._v("импорт в текущий gemset списка gem'ов из файла new.gems")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset delete")]),t._v(" "),e("td",[t._v("удалить gemset")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset empty")]),t._v(" "),e("td",[t._v("очистить gemset")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset delete example --force")]),t._v(" "),e("td",[t._v("полностью удалить gemset example")])]),t._v(" "),e("tr",[e("td",[t._v("rvmreset")]),t._v(" "),e("td",[t._v("перезагрузка RVM")])]),t._v(" "),e("tr",[e("td",[t._v("rvm uninstall")]),t._v(" "),e("td",[t._v("удалить версию Ruby, оставить исходники")])]),t._v(" "),e("tr",[e("td",[t._v("rvm implode")]),t._v(" "),e("td",[t._v("полностью удалить RVM!")])]),t._v(" "),e("tr",[e("td",[t._v("rvm list known")]),t._v(" "),e("td",[t._v("получить список всех версий ruby доступных для установки")])]),t._v(" "),e("tr",[e("td",[t._v("rvm list")]),t._v(" "),e("td",[t._v("отобразить список установленных версий ruby")])]),t._v(" "),e("tr",[e("td",[t._v("rvm gemset list")]),t._v(" "),e("td",[t._v("просмотреть список gemset'ов в выбранной версии ruby")])]),t._v(" "),e("tr",[e("td",[t._v("rvm install 1.9.3")]),t._v(" "),e("td",[t._v("установить ruby версии 1.9.3")])]),t._v(" "),e("tr",[e("td",[t._v("rvm remove 1.9.3")]),t._v(" "),e("td",[t._v("удалить ruby версии 1.9.3")])]),t._v(" "),e("tr",[e("td",[t._v("rvm use 1.9.3")]),t._v(" "),e("td",[t._v("переключиться на ruby версии 1.9.3")])]),t._v(" "),e("tr",[e("td",[t._v("rvm use 1.9.3@jekyll --default")]),t._v(" "),e("td",[t._v("использовать версию ruby 1.9.3 c gemset jekyll по умолчанию")])]),t._v(" "),e("tr",[e("td",[t._v("rvm use system")]),t._v(" "),e("td",[t._v("использовать системную версию ruby")])])])]),t._v(" "),e("h2",{attrs:{id:"создание-отдеnьного-окружения-дnя-проекта"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#создание-отдеnьного-окружения-дnя-проекта","aria-hidden":"true"}},[t._v("#")]),t._v(" Создание отдельного окружения для проекта")]),t._v(" "),e("p",[t._v("Бывают случаи, когда необходимо не просто использовать разные версии ruby, но и разные версии gemset'ов для разных проектов. В этом посильную помощь может оказать создание своего окружения для каждого из проектов.")]),t._v(" "),e("p",[t._v("В примере выше мы создали gemset "),e("code",[t._v("jekyll")]),t._v(", который использует версию ruby 1.9.3 и собственный набор gem'ов. Теперь у нас имеется два пути для работы с ним.")]),t._v(" "),e("p",[e("strong",[t._v("Переключение между gemset'ами")])]),t._v(" "),e("p",[t._v("Во-первых, можно переключаться между gemsets при необходимости.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ rvm gemset use global\n$ rvm gemset use jekyll\n")])])]),e("p",[e("strong",[t._v("Окружение?")])]),t._v(" "),e("p",[t._v("Но зачастую быстрее один раз внести необходимые настройки. Для этого следует создать два файла в каталоге с проектом: "),e("code",[t._v(".ruby-gemset")]),t._v(" и "),e("code",[t._v(".ruby-version")]),t._v(", куда и поместить информацию об используемом в проекте gemset'е и версии ruby соответственно.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/workspace/jekyll/.ruby-gemset\njekyll\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/workspace/jekyll/.ruby-version\nruby-1.9.3-p448\n")])])]),e("p",[t._v("Теперь достаточно просто зайти в директорию проекта, и нужные нам параметры будут установлены автоматически.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" workspace/jekyll\n$ rvm list\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ruby-1.9.3-p448 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" x86_64 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n * ruby-2.0.0-p247 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" x86_64 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# => - current")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# =* - current && default")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  * - default")]),t._v("\n")])])]),e("p",[t._v("То есть, если вы использовали версию ruby 2, после перехода в каталог с проектом, она автоматически изменится на версию, указанную в "),e("code",[t._v(".ruby-version")]),t._v(", что достаточно удобно.")])])},[],!1,null,null,null);s.default=n.exports}}]);