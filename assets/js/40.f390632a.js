(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{239:function(s,a,t){"use strict";t.r(a);var e=t(3),n=Object(e.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v('Трудно приходится линуксоидам, не имеющим DE, а\nсидящим исключительно на WM — всё, что в полноценном Desktop\nEnvironment ( окружении рабочего стола или как это лучше обозначить\nна великом и могучем? ) поставляется и работает "из коробки" в WM нужно\nподбирать и настраивать. Вот и автором сего поста ранее были использованы\nэлементы xfce для таких вещей как управление питанием, регулировка громкости\nзвука и яркости экрана. Но вступило что-то в голову: ведь в моей системе всегда\nустановлены acpi и laptop-mode-tools, так почему бы не обучить их выполнять их\nже непосредственные обязанности: делать всё то, для чего раньше нужны были\nxfce4-volumed и xfce4-power-manager?')]),s._v(" "),t("p",[s._v("Для обучения нам понадобятся пакеты "),t("code",[s._v("laptop-mode-tools")]),s._v(", "),t("code",[s._v("acpi")]),s._v(",\n"),t("code",[s._v("acpid")]),s._v(". Acpid должен быть запущен.")]),s._v(" "),t("h2",{attrs:{id:"уровень-яркости-экрана"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#уровень-яркости-экрана","aria-hidden":"true"}},[s._v("#")]),s._v(" Уровень яркости экрана")]),s._v(" "),t("p",[s._v("Дописать в "),t("code",[s._v("/etc/default/grub")]),s._v(" строки:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GRUB_CMDLINE_LINUX_DEFAULT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acpi_backlight=vendor resume=/dev/sda5"')]),s._v("\n")])])]),t("p",[s._v("Лезем в acpi")]),s._v(" "),t("p",[s._v("Создайте файлы со следующим содержанием:")]),s._v(" "),t("p",[s._v("Для увеличения яркости:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/actions/bl_up.sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bl_device")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sys/class/backlight/intel_backlight/brightness\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cat $bl_device"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$bl_device")]),s._v("\n")])])]),t("p",[s._v("и для уменьшения яркости")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/actions/bl_down.sh:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bl_device")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sys/class/backlight/intel_backlight/brightness\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cat $bl_device"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$bl_device")]),s._v("\n")])])]),t("p",[s._v("В "),t("code",[s._v("bl_device")]),s._v(" замените "),t("code",[s._v("inel_backlight")]),s._v(" на своё значение в\nзависимости от используемой видеокарты. Также стоит выяснить\nустраивающее вас значение, на основе которого будет увеличиваться или уменьшаться\nяркость экрана. У автора это значение = 200.")]),s._v(" "),t("p",[s._v("Как найти подходящее значение?\nПосмотрите какая цифра стоит сейчас. Если вы ничего ещё не настраивали, она должна отражать максимально допустимое значение:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# cat  /sys/class/backlight/intel_backlight/brightness\n4882\n")])])]),t("p",[s._v("Теперь поиграйте со значениями, чтобы выбрать нужный шаг:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# echo 1000 > /sys/class/backlight/intel_backlight/brightness\n# echo 1010 > /sys/class/backlight/intel_backlight/brightness\n# echo 1100 > /sys/class/backlight/intel_backlight/brightness\n")])])]),t("p",[s._v("Посмотрите как будет изменяться яркость экрана при разных значениях, если при добавлении 10 единиц вы практически не чувствуете разницы, добавьте ещё 50-100 единиц. Какой шаг покажется оптимальным, тот и оставьте.")]),s._v(" "),t("p",[s._v("Теперь укажем acpi использовать наши скрипты:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/events/bl_up")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("video"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("brightnessup\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/acpi/actions/bl_up.sh\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/events/bl_down")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("video"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("brightnessdown\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/acpi/actions/bl_down.sh\n")])])]),t("p",[s._v("и сделаем эти скрипты исполняемыми:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# chmod +x /etc/acpi/actions/{bl_up.sh,bl_down.sh}\n")])])]),t("p",[s._v("Чтобы автоматически подбирать яркость при работе от аккумулятора или же сети, установим laptop-mode-tools:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# pacman -S laptop-mode-tools\n")])])]),t("p",[s._v("и немного изменим его настройки:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/laptop-mode/conf.d/lcd-brightness.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTROL_BRIGHTNESS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Commands to execute to set the brightness on your LCD")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#BATT_BRIGHTNESS_COMMAND="echo [value]"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BATT_BRIGHTNESS_COMMAND")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo 700"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LM_AC_BRIGHTNESS_COMMAND")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo 2000"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NOLM_AC_BRIGHTNESS_COMMAND")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo 3000"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BRIGHTNESS_OUTPUT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/sys/class/backlight/intel_backlight/brightness"')]),s._v("\n")])])]),t("p",[s._v("Разумеется, значения "),t("code",[s._v("700/2000/3000")]),s._v(" и путь "),t("code",[s._v("/sys/class/backlight/intel_backlight/brightness")]),s._v(" должны быть заменены на ваши значения.")]),s._v(" "),t("h2",{attrs:{id:"автогибернация-при-критическом-уровне-заряда-батареи"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#автогибернация-при-критическом-уровне-заряда-батареи","aria-hidden":"true"}},[s._v("#")]),s._v(" Автогибернация при критическом уровне заряда батареи")]),s._v(" "),t("p",[s._v("Достаточно часто бывает такое, что при работе от батареи забываешь посматривать на уровень её заряда, в результате чего получаешь отключение машины при полной разрядке батареи. Внезапное - как хлопок - выключение и все несохранённые данные потеряны. Обидно, не правда ли? Поэтому неплохо было бы позаботиться о своевременных мерах предосторожности.")]),s._v(" "),t("p",[s._v("Для этих целей также будем использовать функционал laptop-mode.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/laptop-mode/conf.d/auto-hibernate.conf:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ENABLE_AUTO_HIBERNATION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The hibernation command that is to be executed when auto-hibernation")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is triggered.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HIBERNATE_COMMAND")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/laptop-mode-tools/module-helpers/pm-hibernate\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Auto-hibernation battery level threshold, in percentage of the battery's")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# total capacity.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AUTO_HIBERNATION_BATTERY_CHARGE_PERCENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable this to auto-hibernate if the battery reports that its level is")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# "critical".')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AUTO_HIBERNATION_ON_CRITICAL_BATTERY_LEVEL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("p",[s._v("Если вас не устраивают значения по умолчанию, вы также можете изменить их.\nВ случае, если до этого момента у вас не был указан раздел swap, укажите его в grub2, эти настройки уже были даны выше:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/default/grub")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GRUB_CMDLINE_LINUX_DEFAULT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acpi_backlight=vendor resume=/dev/sda5"')]),s._v("\n")])])]),t("p",[s._v("где "),t("code",[s._v("/dev/sda5")]),s._v(" - ваш swap-раздел\nКроме того, в случае с archlinux следует добавить хук suspend в  "),t("code",[s._v("/etc/mkinitcpio.conf")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOOKS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"base udev autodetect modconf block filesystems usbinput fsck resume"')]),s._v("\n")])])]),t("p",[s._v("и пересобрать initrd:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mkinitcpio -p linux\n")])])]),t("h2",{attrs:{id:"регуnировка-звука"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#регуnировка-звука","aria-hidden":"true"}},[s._v("#")]),s._v(" Регулировка звука")]),s._v(" "),t("p",[s._v("Для этого снова обратимся к скриптам acpi, как и в случае с управлением яркостью дисплея.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/actions/volume_up.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n/usr/bin/amixer "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" Master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("%+\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/actions/volume_down.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n/usr/bin/amixer "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" Master "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("%-\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/events/volume_up")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("button"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("volumeup\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/acpi/actions/volume_up.sh\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/acpi/events/volume_down")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("button"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("volumedown\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/acpi/actions/volume_down.sh\n")])])]),t("p",[s._v("Делаем скрипты в actions исполняемыми:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# chmod +x /etc/acpi/actions/{volume_up.sh,volume_down.sh}\n")])])]),t("p",[s._v("Для корректного распознавания мультимедийных клавиш, лучше использовать утилиту "),t("code",[s._v("xmodmap")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ xmodmap -pke "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ~/.xmodmap\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" .xinitrc:\nxmodmap ~/.xmodmap\n")])])]),t("h2",{attrs:{id:"acpi-и-события-кnавиш"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#acpi-и-события-кnавиш","aria-hidden":"true"}},[s._v("#")]),s._v(" Acpi и события клавиш")]),s._v(" "),t("p",[s._v("Честно говоря, меня устраивает поведение по-умолчанию, поэтому с пристрастием\nэтот вопрос не рассматривался. При закрытии крышки ноутбука машина переходит\nв режим гибернации. При нажатии кнопки питания - корректно отключает систему. Оно и хорошо.")]),s._v(" "),t("p",[s._v("Похоже, управление этими событиями тоже берёт на себя laptop-mode-tools\n( только пока неясно, в каком модуле/скрипте лежат эти настройки),\nпоскольку в "),t("code",[s._v("/etc/acpi/handler.sh")]),s._v(" каких-либо действий на события не назначено.")]),s._v(" "),t("p",[s._v("Но таки рассмотрим как настраивать то или иное событие.")]),s._v(" "),t("p",[s._v("Ответственен за эти шаманские действа вышеупомянутый "),t("code",[s._v("handler.sh")]),s._v("\n(или "),t("code",[s._v("default.sh")]),s._v(" в зависимости от используемого дистрибутива), где и прописываются\nнастройки. В случае, если вам хочется использовать не команду, а скрипт, расположите\nего в отдельном файле, подобно тому, как выше настраивалось управление яркостью\nдисплея и уровнем громкости .")]),s._v(" "),t("p",[s._v("Пример из дефолта:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("button/lid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n            close"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LID closed'")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LID opened'")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ACPI action undefined: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[t("code",[s._v("button/lid")]),s._v(" указывает на управление закрытием/открытием крышки ноутбука,\nпока здесь нет ничего интересного.")]),s._v(" "),t("p",[s._v("Пример с воспроизведением звукового файла при закрытии/открытии крышки ноутбука:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("    button/lid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n            close"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LID closed'")]),s._v("\n                aplay /home/redvi/.scripts/message.wav\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LID opened'")]),s._v("\n                aplay /home/redvi/.scripts/message.wav\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                logger "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ACPI action undefined: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("То есть для настройки события нужно добавить его команду в соответствующее\nполе ( здесь после "),t("code",[s._v("logger 'LID closed'")]),s._v("). Так, действие при открытии крышки\nнужно будет вписать после "),t("code",[s._v("logger 'LID opened'")]),s._v(".")]),s._v(" "),t("p",[t("code",[s._v("button/power")]),s._v(" — события, связанные с кнопкой управления питанием")]),s._v(" "),t("p",[t("code",[s._v("logger 'PowerButton pressed'")]),s._v(" — когда клавиша нажата")]),s._v(" "),t("p",[t("code",[s._v("button/sleep")]),s._v(" — сон, если подобная кнопка/клавиша имеется")]),s._v(" "),t("p",[t("code",[s._v("ac_adapter")]),s._v(" — события, связанные с подключением/отключением адаптера питания")]),s._v(" "),t("p",[t("code",[s._v("logger 'AC unpluged'")]),s._v(" — когда адаптер отключен")]),s._v(" "),t("p",[t("code",[s._v("logger 'AC pluged'")]),s._v(" — когда адаптер подключен")]),s._v(" "),t("p",[t("code",[s._v("battery")]),s._v(" — батарея ноутбука")]),s._v(" "),t("p",[t("code",[s._v("button/lid")]),s._v(" — крышка ноутбука")]),s._v(" "),t("p",[s._v("Для перевода в ждущий/спящий режимы можно использовать скрипты\n"),t("code",[s._v("laptop-mode-tools")]),s._v(" из "),t("code",[s._v("/usr/share/laptop-mode-tools/module-helpers")]),s._v(":  "),t("code",[s._v("pm-hibernate")]),s._v(" и  "),t("code",[s._v("pm-suspend")]),s._v(".")]),s._v(" "),t("p",[s._v("Для выключения питания при закрытии крышки достаточно добавить\nв "),t("code",[s._v("/etc/acpi/actions/lm_lid.sh")]),s._v(" строку:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"close"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" poweroff\n")])])]),t("p",[s._v("Помимо всего вышеописанного мы можем контролировать парковку головок жёсткого диска.\nДабы отключить парковку совсем пропишите в "),t("code",[s._v("/etc/laptop-mode/laptop-mode.conf")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BATT_HD_POWERMGMT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("254")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LM_AC_HD_POWERMGMT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("254")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NOLM_AC_HD_POWERMGMT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("254")]),s._v("\n")])])]),t("p",[s._v("Пожалуй, на этом стоит остановиться и дать читателю возможность самостоятельно\nпоэкспериментировать с настройками энергосбережения и событий acpi.")])])},[],!1,null,null,null);a.default=n.exports}}]);