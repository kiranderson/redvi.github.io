(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{219:function(a,s,t){"use strict";t.r(s);var e=t(3),r=Object(e.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("Не так давно в archlinux всё же прекратили поддержку grub-legacy.\nТеперь выбор варьируется между двумя загрузчиками: Syslinux и Grub2.\nКак ясно из названия поста, автор отдаёт предпочтение второму варианту.\nГоворят, syslinux проще, поэтому большинство пользователей может обратить\nвнимание на него.  А вот владельцам UEFI BIOS рекомендуют второй граб.")]),a._v(" "),e("h2",{attrs:{id:"установка"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#установка","aria-hidden":"true"}},[a._v("#")]),a._v(" Установка")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# pacman -S grub-bios grub2-common\n# grub-install /dev/sda\n# grub-mkconfig -o /boot/grub/grub.cfg\n")])])]),e("p",[a._v("Теперь заглянем в файл "),e("code",[a._v("/etc/default/grub")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/default/grub")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_DEFAULT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# загружаемый по умолчанию пункт меню, 0 - первый пункт")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_TIMEOUT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# тайм аут, когда можно выбрать другой пункт, 5 - 5 секунд")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_DISTRIBUTOR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Arch"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# "поставщик" вашей версии grub\'а')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_CMDLINE_LINUX_DEFAULT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"quiet acpi"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# параметры загрузки для обычной загрузки")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_CMDLINE_LINUX")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# параметры загрузки (обычной и в режиме восстановления)")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_PRELOAD_MODULES")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"part_gpt part_msdos"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# дополнительные модули загрузки")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_TERMINAL_INPUT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("console "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# использование консоли")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# разрешение графического меню (800х600, например)")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_GFXMODE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auto\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# будет ли включен режим восстановления")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_DISABLE_RECOVERY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n")])])]),e("p",[a._v("Подробнее можно почитать "),e("a",{attrs:{href:"http://ru.wikibooks.org/wiki/Grub_2",target:"_blank",rel:"noopener noreferrer"}},[a._v("здесь"),e("OutboundLink")],1),a._v(".")]),a._v(" "),e("p",[e("img",{attrs:{src:t(56),alt:"archlinux_grub",title:"archlinux_grub"}})]),a._v(" "),e("h2",{attrs:{id:"изменение-параметров"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#изменение-параметров","aria-hidden":"true"}},[a._v("#")]),a._v(" Изменение параметров:")]),a._v(" "),e("h3",{attrs:{id:"настройка-яркости-экрана"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#настройка-яркости-экрана","aria-hidden":"true"}},[a._v("#")]),a._v(" Настройка яркости экрана:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/default/grub:")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_CMDLINE_LINUX_DEFAULT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"quiet acpi_backlight=vendor"')]),a._v("\n")])])]),e("p",[a._v("После чего:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# grub-mkconfig -o /boot/grub/grub.cfg\n")])])]),e("h3",{attrs:{id:"загрузка-двух-и-боnее-операционных-систем"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#загрузка-двух-и-боnее-операционных-систем","aria-hidden":"true"}},[a._v("#")]),a._v(" Загрузка двух и более операционных систем")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# pacman -S os-prober\n# grub-mkconfig -o /boot/grub/grub.cfg\n")])])]),e("p",[a._v("Распознать имеющиеся ОС должен автоматически. Если этого не произошло, придётся\nдобавить вручную, после чего снова переконфигурировать конфигурационный файл\ngrub.")]),a._v(" "),e("h3",{attrs:{id:"как-добавить-windows"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#как-добавить-windows","aria-hidden":"true"}},[a._v("#")]),a._v(" Как добавить Windows?")]),a._v(" "),e("p",[a._v("В файл "),e("code",[a._v("/etc/grub.d/40_custom")]),a._v(" внести строки:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("menuentry "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Microsoft Windows 7 BIOS-MBR"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    insmod part_msdos\n    insmod ntfs\n    insmod search_fs_uuid\n    insmod ntldr\n    search --fs-uuid --no-floppy --set"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root C474B30B74B2FEEC\n    ntldr /bootmgr\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[a._v("где "),e("code",[a._v("fs-uuid")]),a._v(" - ID вашего раздела с Windows. Определить его можно с помощью команды "),e("code",[a._v("blkid")]),a._v(":")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('# sudo blkid\n/dev/sda1: UUID="C474B30B74B2FEEC" TYPE="ntfs"\n')])])]),e("p",[a._v("После чего обновить конфигурацию grub2:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# grub-mkconfig -o /boot/grub/grub.cfg\n")])])]),e("h2",{attrs:{id:"украшатеnьства"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#украшатеnьства","aria-hidden":"true"}},[a._v("#")]),a._v(" Украшательства")]),a._v(" "),e("p",[a._v("Для Archlinux можно найти неплохие темы в AUR.")]),a._v(" "),e("p",[a._v("Чтобы поставить тему, послужившую иллюстрацией к данному посту, проделываем\nследующие шаги - установим тему и скопируем её в директорию с grub:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ yaourt grub2-theme-archlinux\n# cp -r /usr/share/grub/themes/Archlinux /boot/grub/themes/\n")])])]),e("p",[a._v("Открываем в текстовом редакторе "),e("code",[a._v("/etc/default/grub")]),a._v(":")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/default/grub")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GRUB_THEME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/boot/grub/themes/Archlinux/theme.txt"')]),a._v("\n")])])]),e("p",[a._v("Рекомендуется установить разрешение экрана загрузчика к данной теме:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("GRUB_GFXMODE=1024x768\n")])])]),e("p",[a._v("После чего снова:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# grub-mkconfig -o /boot/grub/grub.cfg\nГенерируется grub.cfg …\nНайдена тема: /boot/grub/themes/Archlinux/theme.txt\nНайден образ linux: /boot/vmlinuz-linux\nНайден образ initrd: /boot/initramfs-linux.img\nNo volume groups found\nНайден Windows 7 (loader) на /dev/sda1\nзавершено\n")])])]),e("p",[a._v("Также для эстетических целей используется "),e("code",[a._v("plymouth")]),a._v(" (его часто можно увидеть\nв user-friendly дистрибутивах, например, в ubuntu), но автор сего зверя не\nставит и не рекомендует по одной простой причине: он снижает скорость загрузки.")])])},[],!1,null,null,null);s.default=r.exports},56:function(a,s,t){a.exports=t.p+"assets/img/grub2.png"}}]);